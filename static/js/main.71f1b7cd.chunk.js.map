{"version":3,"sources":["lib/createId.tsx","hooks/useUpdate.tsx","hooks/useTags.tsx","components/Icon.tsx","components/Button.tsx","views/Tag/Topbar.tsx","components/Center.tsx","views/Tag/VerticalSelect.tsx","views/Tags.tsx","components/Nav.tsx","components/Layout.tsx","views/Money/CategorySection.tsx","lib/date.tsx","hooks/useRecords.tsx","views/Details.tsx","components/Input.tsx","views/Money/NoteSection.tsx","views/Money/NumberPadSection/Wrapper.tsx","views/Money/DatePicker.tsx","views/Money/NumberPadSection.tsx","views/Money/NumberPadSection/generateOutput.tsx","views/Money/TagsSection.tsx","views/Money.tsx","hooks/useRouter.tsx","views/NoMatch.tsx","data/tags.ts","views/Tag.tsx","views/Detail/SelectSection.tsx","lib/chart.tsx","views/Statistics.tsx","App.tsx","index.tsx"],"names":["tagId","parseInt","window","localStorage","getItem","recordId","createId","name","setItem","JSON","stringify","useUpdate","fn","dependencies","count","useRef","useEffect","current","useTags","useState","tags","setTags","localTags","parse","length","id","icon","category","getIcon","find","t","addTag","index","findIndex","item","findTag","filter","tag","filterTag","updateTag","map","findTagIndex","result","i","deleteTag","Svg","styled","svg","props","width","size","height","fill","color","Icon","className","children","attributes","cs","xlinkHref","defaultProps","Button","button","Topbar","header","Center","div","BarWrapper","section","LineWrapper","VerticalSelect","options","key","selected","value","container","changeScrollDirection","e","currentTarget","scrollLeft","deltaY","Content","ref","onWheel","c","onClick","onChange","Wrapper","type","TagList","ol","Tags","history","useHistory","useParams","setCategory","tagGroup","goBack","style","opacity","to","NavWrapper","nav","Nav","pathname","useLocation","activeClassName","Main","Layout","mainRef","setTimeout","scrollTop","CategorySection","categoryMap","categoryList","dayjs","extend","weekOfYear","weekYear","Ls","en","weekStart","getGroup","date","dateUnit","prefix","now","getNowGroup","unit","isSame","time","last","startOf","subtract","year","format","uid","title","weekNum","week","toString","padStart","month","day","useRecords","records","setRecords","sections","setSections","addRecord","newRecord","amount","alert","record","createdAt","Date","toISOString","getRecords","newList","r","sort","a","b","valueOf","sec","start","end","before","startUid","unshift","calcSections","items","push","forEach","group","total","reduce","sum","getKvPairs","uuid","span","daysInMonth","split","bucket","keys","values","ranks","nexts","add","undefined","unitFormat","Object","rankList","percent","splice","removeRecord","newRecords","slice","MyLayout","CategoryWrapper","Item","Header","h3","Details","hash","array","entries","note","Label","label","Input","rest","Inner","NoteSection","target","placeholder","DatePicker","NumberPadSection","output","_setOutput","setDate","text","getAttribute","concat","indexOf","newOutput","parseFloat","setOutput","generateOutput","onOk","onDateSet","TagsSection","selectedTagId","getClass","onToggleTag","defaultFormData","Money","setSelected","redirect","url","setUrl","flag","setFlag","useRouter","obj","NoMatch","defaultTags","InputWrapper","Tag","newTag","setNewTag","dateCategoryMap","SelectSection","dateCategory","setDateCategory","listVisible","toPercent","str","Number","toFixed","defaultSelected","RankList","Statistics","setValue","setOptions","groupRecords","setGroupRecords","gRecords","selectedRecords","Detail","inner","chartOptions","grid","left","right","xAxis","data","axisTick","alignWithLabel","axisLine","lineStyle","axisLabel","formatter","yAxis","show","series","symbol","symbolSize","itemStyle","borderWidth","node","borderColor","smooth","markLine","position","silent","animation","avg","max","option","AppWrapper","App","exact","path","from","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.71f1b7cd.chunk.js","sourcesContent":["let tagId = parseInt(window.localStorage.getItem('tagIdMax') || '0');\r\nlet recordId = parseInt(window.localStorage.getItem('recordIdMax') || '0');\r\n\r\nconst createId = (name: 'tag' | 'record'): number => {\r\n  switch (name) {\r\n    case 'record':\r\n      recordId += 1;\r\n      window.localStorage.setItem('recordIdMax', JSON.stringify(recordId));\r\n      return recordId;\r\n    case 'tag':\r\n      tagId += 1;\r\n      window.localStorage.setItem('tagIdMax', JSON.stringify(tagId));\r\n      return tagId;\r\n  }\r\n\r\n};\r\n\r\nexport {createId};\r\n","import {useEffect, useRef} from 'react';\r\n\r\nexport const useUpdate = (fn: () => void, dependencies: any) => {\r\n  const count = useRef(0);\r\n\r\n  useEffect(() => {\r\n    count.current += 1;\r\n  });\r\n\r\n  // 每次数据变化都会触发\r\n  useEffect(() => {\r\n    if (count.current > 1) {\r\n      fn();\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [fn, ...dependencies]);// 不可变数据\r\n};\r\n","import {useEffect, useState} from 'react';\nimport {createId} from 'lib/createId';\nimport {useUpdate} from './useUpdate';\n\nexport type Category = ('expense' | 'income');\n\nexport type TagItem = {\n  id: number\n  icon: string\n  name: string\n  category: Category\n}\n\nconst useTags = () => {\n  const [tags, setTags] = useState<TagItem[]>([]);\n\n  useEffect(() => {\n    let localTags = JSON.parse(window.localStorage.getItem('tags') || '[]');\n    if (localTags.length === 0) {\n      localTags = [\n        {id: 1, icon: 'jucan', name: '聚餐', category: 'expense'},\n        {id: 2, icon: 'gouwu', name: '购物', category: 'expense'},\n        {id: 3, icon: 'riyong', name: '日用', category: 'expense'},\n        {id: 4, icon: 'jiaotong', name: '交通', category: 'expense'},\n        {id: 8, icon: 'yundong', name: '运动', category: 'expense'},\n        {id: 9, icon: 'yule', name: '娱乐', category: 'expense'},\n        {id: 11, icon: 'yifu', name: '衣服', category: 'expense'},\n        {id: 13, icon: 'zhufang', name: '住房', category: 'expense'},\n        {id: 15, icon: 'yuer', name: '育儿', category: 'expense'},\n        {id: 18, icon: 'lvxing', name: '旅行', category: 'expense'},\n        {id: 20, icon: 'shuma', name: '数码', category: 'expense'},\n        {id: 21, icon: 'yiliao', name: '医疗', category: 'expense'},\n        {id: 22, icon: 'shuji', name: '书籍', category: 'expense'},\n        {id: 24, icon: 'chongwu', name: '宠物', category: 'expense'},\n        {id: 33, icon: 'gongzi', name: '工资', category: 'income'},\n        {id: 34, icon: 'jianzhi', name: '兼职', category: 'income'},\n        {id: 35, icon: 'licai', name: '理财', category: 'income'},\n        {id: 36, icon: 'lijin', name: '红包', category: 'income'},\n        {id: 37, icon: 'qita', name: '其他', category: 'income'},\n      ];\n    }\n    setTags(localTags);\n  }, []);// 组件挂载时执行\n\n  useUpdate(() => {\n    window.localStorage.setItem('tags', JSON.stringify(tags));\n  }, [tags]);\n\n  const findTag = (id: number) => tags.filter(tag => tag.id === id)[0];\n  const findTagIndex = (id: number) => {\n    let result = -1;\n    for (let i = 0; i < tags.length; i++) {\n      if (tags[i].id === id) {\n        result = i;\n        break;\n      }\n    }\n    return result;\n  };\n  const updateTag = (id: number, {icon, name, category}: Omit<TagItem, 'id'>) => {\n    // map() 不会改变原始数组\n    setTags(tags.map(tag => tag.id === id ? {id, icon, name, category} : tag));\n  };\n  const deleteTag = (id: number) => {\n    // filter 会返回一个新数组\n    setTags(tags.filter(tag => tag.id !== id));\n  };\n  const addTag = ({id, icon, name, category}: TagItem) => {\n    if (name !== null && name !== '') {\n      const index = tags.findIndex(item => item.id === id);\n      if (index === -1) {\n        setTags([...tags, {id, icon, name, category}]);\n      } else {\n        setTags([...tags, {id: createId('tag'), icon, name, category}]);\n      }\n    }\n  };\n  const getIcon = (id: number) => {\n    return tags.find(t => t.id === id);\n    // return tag ? tag.icon : '';\n  };\n  const filterTag = (category: Category) => tags.filter(tag => tag.category === category);\n\n  return {tags, getIcon, addTag, setTags, findTag, filterTag, updateTag, findTagIndex, deleteTag};\n};\n\nexport {useTags};\n\n// 改 tag\n// 衣 => 衣服\n// {amount:100, tags:[1]}\n\n// tag: string => tag: {id: number; name: string}\n","import React from 'react';\nimport cs from 'classnames';\nimport styled from 'styled-components';\n\nconst Svg = styled.svg<{ size: number }>(props => ({\n  width: props.size,\n  height: props.size,\n  fill: props.color\n}));\n\ntype Props = {\n  name?: string\n  value?: string\n  color?: string\n  size?: number\n} & React.SVGAttributes<SVGElement>\n\nconst Icon = (props: Props) => {\n  // children, className 需要排除在外\n  const {name, color, size, children, className, ...attributes} = props;\n  return (\n    // <svg className={`icon ${className ? className : ''}`} {...rest}>\n    <Svg size={size!} color={color} aria-hidden=\"true\"\n         className={cs('icon', className)} {...attributes}>\n      {name && <use xlinkHref={'#icon-' + name}/>}\n    </Svg>\n  );\n};\n\nIcon.defaultProps = {\n  size: 16,\n};\n\nexport default Icon;\n","import styled from 'styled-components';\r\n\r\nconst Button = styled.button`\r\n  font-size: 18px;\r\n  border: none;\r\n  padding: 8px 12px;\r\n  background: #767676;\r\n  border-radius: 4px;\r\n  color: white;\r\n`;\r\n\r\nexport {Button};","import styled from 'styled-components';\r\n\r\nconst Topbar = styled.header`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  line-height: 20px;\r\n  padding: 14px;\r\n  font-size: 16px;\r\n  background-color: #ffda44;\r\n`;\r\n\r\nexport {Topbar};\r\n","import styled from 'styled-components';\r\n\r\nconst Center = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nexport {Center};\r\n","import styled from 'styled-components';\nimport React, {useRef} from 'react';\n\nconst BarWrapper = styled.section`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 14px;\n  background-color: #ffda44;\n\n  > ul {\n    display: flex;\n    border: 1px solid #333;\n    margin-bottom: 14px;\n    border-radius: 8px;\n    overflow: hidden;\n    align-items: center;\n\n    > li {\n      width: 110px;\n      text-align: center;\n      padding: 0.4em 0;\n\n      &.selected {\n        background-color: #333;\n        color: #ffda44;\n      }\n\n      &:not(:first-child) {\n        border-left: 1px solid #333;\n      }\n    }\n  }\n`;\n\nconst LineWrapper = styled.section`\n  font-size: 14px;\n\n  > ul {\n    display: flex;\n    border-bottom: 1px solid #ddd;\n    overflow-x: auto;\n    scrollbar-width: none; /* Firefox */\n    -ms-overflow-style: none; /* IE 10+ */\n    white-space: nowrap;\n    cursor: pointer;\n    //direction: rtl;\n\n    &::-webkit-scrollbar {\n      display: none; /* Chrome Safari */\n    }\n\n    > li {\n      flex-shrink: 0;\n      text-align: center;\n      padding: 8px 0;\n      margin: 0 12px;\n\n      &.selected > span {\n        position: relative;\n      }\n\n      &.selected > span::after {\n        content: '';\n        display: block;\n        height: 3px;\n        background: #333;\n        position: absolute;\n        bottom: -8px;\n        width: 100%;\n        left: 50%;\n        transform: translateX(-50%);\n      }\n    }\n  }\n`;\n\nexport type ObjectArray = { key: string, value: string }[]\n\ntype Props = {\n  type?: 'bar' | 'line'\n  value: string\n  map: ObjectArray\n  onChange: (value: string) => void\n}\n\nconst VerticalSelect: React.FC<Props> = (props) => {\n  const options = props.map.map(item => item.key);\n  const selected = props.value;\n\n  const container = useRef<HTMLUListElement>(null);\n  const changeScrollDirection = (e: any) => {\n    e.currentTarget.scrollLeft += e.deltaY;\n    // if (!container.current) return;\n    // container.current.scrollLeft += e.deltaY;\n    // e.preventDefault();\n  };\n\n  const Content = () => {\n    return (\n      <ul ref={container} onWheel={changeScrollDirection}>\n        {options.map((c, index) =>\n          <li key={c} className={selected === c ? 'selected' : ''}\n              onClick={(e) => {\n                // fixme：pc 端鼠标点击后滚轮会跳转到头部\n                props.onChange(c);\n                // e.currentTarget.scrollIntoView({inline: 'nearest'});\n                // if (!container.current) return;\n                // container.current.scrollLeft = e.currentTarget.offsetLeft;\n                // e.preventDefault();\n                // e.stopPropagation();\n              }}>\n            <span>{props.map[index].value}</span>\n          </li>\n        )}\n      </ul>\n    );\n  };\n\n  const Wrapper = () => {\n    switch (props.type) {\n      case 'line':\n        return (\n          <LineWrapper>\n            <Content/>\n          </LineWrapper>\n        );\n      case 'bar':\n      default:\n        return (\n          <BarWrapper>\n            <Content/>\n          </BarWrapper>\n        );\n    }\n  };\n\n  return <Wrapper></Wrapper>;\n};\n\nexport {VerticalSelect};\n","import React, {useState} from 'react';\nimport {Category, useTags} from 'hooks/useTags';\nimport styled from 'styled-components';\nimport Icon from 'components/Icon';\nimport {Link, useHistory, useParams} from 'react-router-dom';\nimport {Button} from 'components/Button';\nimport {Topbar} from './Tag/Topbar';\nimport {Center} from '../components/Center';\nimport {VerticalSelect} from './Tag/VerticalSelect';\n\nconst TagList = styled.ol`\n  font-size: 16px;\n  background: white;\n  height: 100%;\n  overflow-y: auto;\n\n  > li {\n    border-bottom: 1px solid #d5d5d9;\n    line-height: 20px;\n    margin-left: 16px;\n    display: flex;\n    align-items: center;\n\n    svg {\n      margin: 10px 10px 10px 0;\n    }\n\n    > .divide {\n      flex: 1;\n      display: flex;\n      justify-content: space-between; // 左右分开\n      align-items: center; // 上下居中\n    }\n  }\n`;\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  position: relative;\n  animation: animate 1s ease;\n  overflow: hidden;\n\n  // fixme: 此动画在 pc 端（屏幕较宽时），效果较差！\n  @keyframes animate {\n    from {\n      left: 100vw;\n    }\n    to {\n      left: 0;\n    }\n  }\n\n  button {\n    width: 100%;\n    height: 56px;\n    font-size: 16px;\n    background: white;\n    border-radius: 0;\n    box-shadow: 0 0 3px rgb(0 0 0 / 25%);\n    color: #606266;\n  }\n\n  .placeholder {\n    width: 24px;\n  }\n`;\n\nfunction Tags() {\n  const {deleteTag, filterTag} = useTags();\n  const history = useHistory();\n  // fixme: 用户直接输入 url 访问页面，则没法回退\n  const onClickBack = () => {\n    history.goBack();\n  };\n\n  const {category: type} = useParams<{ category: Category }>();\n  const [category, setCategory] = useState<Category>(type);\n  const tagGroup = filterTag(category);\n\n  return (\n    <Wrapper>\n      <Topbar>\n        <Center onClick={onClickBack}>\n          <Icon name=\"left\" size={24}/>返回\n        </Center>\n        <span>类别设置</span>\n        <Center style={{opacity: 0}}>\n          <Icon name=\"left\" size={24}/>占位\n        </Center>\n      </Topbar>\n      <VerticalSelect value={category}\n                      map={[{key: 'expense', value: '支出'}, {key: 'income', value: '收入'}]}\n                      onChange={(category) => {\n                        setCategory(category as Category);\n                      }}/>\n      <TagList>\n        {tagGroup.map(tag =>\n          <li key={tag.id}>\n            <Icon name=\"remove\" size={24} onClick={() => {\n              deleteTag(tag.id);\n              // window.history.back();\n            }}></Icon>\n            <div className='divide'>\n              <Center>\n                <Icon name={tag.icon} size={24}/>\n                <span className=\"oneLine\">{tag.name}</span>\n              </Center>\n            </div>\n            <Icon name=\"drag\" size={24}></Icon>\n          </li>\n        )}\n      </TagList>\n      <Link to={`/tags/${category}/new`}>\n        <Button>+ 添加类别</Button>\n      </Link>\n    </Wrapper>\n  );\n};\n\nexport default Tags;\n","import styled from 'styled-components';\nimport {NavLink, useLocation} from 'react-router-dom';\nimport React from 'react';\nimport Icon from './Icon';\n\nconst NavWrapper = styled.nav`\n  background: white;\n  box-shadow: 0 0 3px rgba(0, 0, 0, 0.25);\n  line-height: 24px;\n  color: #606266;\n\n  > ul {\n    display: flex;\n\n    > li {\n      width: 33.3333%;\n      text-align: center;\n      position: relative;\n\n      > a {\n        padding: 4px 0;\n        // a 标签加 flex 布局，从 inline元素变为 block元素\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n\n        &.selected:not(.add) {\n          color: #ffda44;\n\n          .icon {\n            fill: #ffda44;\n          }\n        }\n      }\n\n      .add {\n        // 占位用\n        &::before {\n          content: '';\n          display: block;\n          height: 24px;\n        }\n\n        .round {\n          position: absolute;\n          padding: 12px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          border-radius: 50%;\n          border: 4px solid white;\n          background-color: #ffda44;\n          box-shadow: 0px -2px 6px -2px rgba(0, 0, 0, 0.25);\n          left: 50%;\n          bottom: 28px;\n          transform: translateX(-50%);\n\n          .icon {\n            fill: #000;\n          }\n        }\n\n        &.selected {\n          color: #ffda44;\n        }\n      }\n    }\n  }\n`;\n\nconst Nav = () => {\n  const {pathname} = useLocation();\n\n  return (\n    <NavWrapper>\n      <ul>\n        <li>\n          <NavLink to=\"/details\" activeClassName=\"selected\">\n            {\n              pathname === '/details' ? <Icon name=\"details-fill\" size={24}/> :\n                <Icon name=\"details\" size={24}/>\n            }\n            明细\n          </NavLink>\n        </li>\n        <li>\n          <NavLink to=\"/money\" activeClassName=\"selected\" className='add'>\n            <div className='round'>\n              <Icon name=\"add\" size={24}/>\n            </div>\n            记账\n          </NavLink>\n        </li>\n        <li>\n          <NavLink to=\"/statistics\" activeClassName=\"selected\">\n            {\n              pathname === '/statistics' ? <Icon name=\"statistics-fill\" size={24}/> :\n                <Icon name=\"statistics\" size={24}/>\n            }\n            图表\n          </NavLink>\n        </li>\n      </ul>\n    </NavWrapper>\n  );\n};\n\nexport default Nav;\n","import Nav from './Nav';\nimport React, {useEffect, useRef} from 'react';\nimport styled from 'styled-components';\n\nconst Wrapper = styled.div`\n  height: 100vh; // 不能使用 min-height\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n`;\n\nconst Main = styled.div`\n  flex-grow: 1; // 尽量高\n  overflow: auto;\n\n  &::-webkit-scrollbar {\n    display: none;\n  }\n`;\n\ntype Props = {\n  // 必要时控制组件内部样式用，类似于 v-deep\n  className?: string\n  scrollTop?: number\n}\n\nconst Layout: React.FC<Props> = (props) => {\n  const mainRef = useRef<HTMLDivElement>(null);\n  useEffect(() => {\n    setTimeout(() => {\n      if (!mainRef.current) return;\n      mainRef.current.scrollTop = props.scrollTop!;\n    }, 0);// 尽快执行这段代码\n  }, [props.scrollTop]);\n  return (\n    <Wrapper>\n      <Main ref={mainRef} className={props.className} data-x={'rick'}>\n        {props.children}\n      </Main>\n      <Nav/>\n    </Wrapper>\n  );\n};\n\nLayout.defaultProps = {\n  scrollTop: 0\n};\n\nexport default Layout;\n","import styled from 'styled-components';\nimport React, {useState} from 'react';\nimport {Category} from '../../hooks/useTags';\n\nconst Wrapper = styled.section`\n  font-size: 18px;\n\n  > ul {\n    display: flex;\n\n    > li {\n      width: 50%;\n      //text-align: center;\n      padding: 16px 0;\n      line-height: 1em;\n\n      &.selected > span {\n        position: relative;\n\n        &::after {\n          content: '';\n          display: block;\n          height: 3px;\n          background: #333;\n          position: absolute;\n          bottom: -16px;\n          width: 2.8em;\n          left: 50%;\n          transform: translateX(-50%);\n        }\n      }\n    }\n\n    > li:first-child {\n      text-align: right;\n      padding-right: 18px;\n    }\n\n    > li:nth-child(2) {\n      text-align: left;\n      padding-left: 18px;\n    }\n  }\n`;\n\ntype Props = {\n  value: Category\n  onChange: (value: Category) => void;\n}\n\nconst CategorySection: React.FC<Props> = (props) => {\n  const categoryMap = {'expense': '支出', 'income': '收入'};\n  type Keys = keyof typeof categoryMap\n  const [categoryList] = useState<Keys[]>(['expense', 'income']);\n\n  const category = props.value;// + 表示收入，-表示支出\n  return (\n    <Wrapper>\n      <ul>\n        {categoryList.map(c =>\n          <li key={c} className={category === c ? 'selected' : ''}\n              onClick={() => props.onChange(c)}>\n            <span>{categoryMap[c]}</span>\n          </li>\n        )}\n      </ul>\n    </Wrapper>\n  );\n};\n\nexport {CategorySection};\n","import dayjs from 'dayjs';\r\nimport {DateUnit} from '../hooks/useRecords';\r\nimport weekYear from 'dayjs/plugin/weekYear';\r\nimport weekOfYear from 'dayjs/plugin/weekOfYear';\r\n\r\ndayjs.extend(weekOfYear);\r\ndayjs.extend(weekYear);\r\n\r\n// dayjs.locale('en');\r\n// 设置星期一为一周的第一天\r\ndayjs.Ls.en.weekStart = 1;\r\n\r\nconst getGroup = (date: dayjs.Dayjs, dateUnit: DateUnit): { uid: string, title: string } => {\r\n  let prefix: string;\r\n  const now = getNowGroup();\r\n\r\n  const current = (unit: DateUnit) => {\r\n    if (unit === 'week') {\r\n      return date.isSame(now.time, unit);\r\n    } else {\r\n      return date.isSame(now[unit], unit);\r\n    }\r\n  };\r\n\r\n  const last = (unit: DateUnit) => {\r\n    return date.isSame(now.time.startOf(unit).subtract(1, unit), unit);\r\n  };\r\n\r\n  const year = date.format('YYYY');\r\n\r\n  switch (dateUnit) {\r\n    case 'month':\r\n      if (current(dateUnit)) {\r\n        prefix = '本';\r\n      } else if (last(dateUnit)) {\r\n        prefix = '上';\r\n      } else if (current('year')) {\r\n        prefix = date.format('MM');\r\n      } else {\r\n        prefix = year + '-' + date.format('MM');\r\n      }\r\n      return {\r\n        uid: date.format('YYYY-MM'),\r\n        title: prefix + '月'\r\n      };\r\n    case 'year':\r\n      if (current(dateUnit)) {\r\n        prefix = '今';\r\n      } else if (last(dateUnit)) {\r\n        prefix = '去';\r\n      } else {\r\n        prefix = year;\r\n      }\r\n      return {\r\n        uid: year,\r\n        title: prefix + '年'\r\n      };\r\n    case 'week':\r\n      const weekNum = date.week().toString().padStart(2, '0');\r\n      const wy = date.weekYear();\r\n      const week = wy + '-' + weekNum;\r\n      if (now[dateUnit] === week) {\r\n        prefix = '本';\r\n      } else if (last(dateUnit)) {\r\n        prefix = '上';\r\n      } else if (current('week')) {\r\n        prefix = weekNum;\r\n      } else {\r\n        prefix = week;\r\n      }\r\n      return {\r\n        uid: week,\r\n        title: prefix + '周'\r\n      };\r\n    case 'day':\r\n    default:\r\n      if (current(dateUnit)) {\r\n        prefix = '今';\r\n      } else if (last(dateUnit)) {\r\n        prefix = '昨';\r\n      } else {\r\n        prefix = date.format('MM月DD');\r\n      }\r\n      return {\r\n        uid: date.format('YYYY-MM-DD'),\r\n        title: prefix + '日'\r\n      };\r\n  }\r\n};\r\n\r\nconst getNowGroup = () => {\r\n  const now = dayjs();\r\n  const week = now.weekYear() + '-' + now.week().toString().padStart(2, '0');\r\n  const year = now.format('YYYY');\r\n  const month = now.format('YYYY-MM');\r\n  const day = now.format('YYYY-MM-DD');\r\n  // debugger\r\n  return {year, month, day, week, time: now};\r\n};\r\n\r\n// 计算日期间隔\r\nconst calcSections = (start: string, end: string, dateUnit: DateUnit) => {\r\n  const {uid: startUid} = getGroup(dayjs(start), dateUnit);\r\n\r\n  let result = [];\r\n  let i = 0;\r\n  let before;\r\n  let id;\r\n  do {\r\n    // week or isoWeek?\r\n    before = dayjs(end).startOf(dateUnit).subtract(i, dateUnit);\r\n    const {uid, title} = getGroup(before, dateUnit);\r\n    result.unshift({key: uid, value: title});\r\n    id = uid;\r\n    i++;\r\n  } while (id !== startUid);\r\n\r\n  return result;\r\n};\r\n\r\nconst localTime = (date: dayjs.Dayjs) => {\r\n  // format 默认会换算成当地时区时间\r\n  return date.format('YYYY-MM-DDTHH:mm:ssZ[Z]');\r\n};\r\n\r\nconst unitFormat = (date: dayjs.Dayjs, unit: DateUnit) => {\r\n  switch (unit) {\r\n    case 'year':\r\n      return date.format('M月');\r\n    case 'month':\r\n      return date.format('D');\r\n    case 'week':\r\n      return date.format('MM-DD');\r\n    case 'day':\r\n    default:\r\n      return date.format('HH时');\r\n  }\r\n};\r\n\r\nexport {getNowGroup, getGroup, calcSections, localTime, unitFormat};\r\n","import {useEffect, useState} from 'react';\nimport {useUpdate} from './useUpdate';\nimport {Category} from './useTags';\nimport dayjs from 'dayjs';\nimport {calcSections, getGroup, unitFormat} from '../lib/date';\nimport {ObjectArray} from '../views/Tag/VerticalSelect';\nimport {createId} from '../lib/createId';\n\nexport type RecordItem = {\n  id: number\n  tagId: number\n  note: string\n  category: Category\n  amount: number\n  createdAt: string // ISO 8601\n}\n\nexport type DateUnit = 'day' | 'week' | 'month' | 'year'\n\nexport type Group = {\n  category: Category\n  dateUnit: DateUnit\n  query?: number\n}\n\nexport type Result = { uid: string, title: string, total?: number, items: RecordItem[] }[];\nexport type RankList = { tagId: number, value: number, percent: number }[];\n\nexport const useRecords = () => {\n  let [records, setRecords] = useState<RecordItem[]>([]);\n  const [sections, setSections] = useState<ObjectArray>([]);\n\n  useEffect(() => {\n    setRecords(JSON.parse(window.localStorage.getItem('records') || '[]'));\n  }, []);// 组件挂载时执行\n\n  useUpdate(() => {\n    window.localStorage.setItem('records', JSON.stringify(records));\n  }, [records]);\n\n  const addRecord = (newRecord: RecordItem) => {\n    if (newRecord.amount <= 0) {\n      alert('请输入金额');\n      return false;\n    }\n    if (newRecord.tagId < 0) {\n      alert('请选择标签');\n      return false;\n    }\n    let record;\n    if (newRecord.createdAt === '') {\n      record = {...newRecord, createdAt: (new Date()).toISOString(), id: createId('record')};\n    } else {\n      record = {...newRecord, createdAt: (new Date(newRecord.createdAt)).toISOString(), id: createId('record')};\n    }\n    setRecords([...records, record]);\n    return true;\n  };\n\n  const removeRecord = (index: number) => {\n    const i = records.findIndex(item => item.id === index);\n    const newRecords = records.slice(0);\n    newRecords.splice(i, 1);\n    setRecords(newRecords);\n  };\n\n  const getRecords = ({category, dateUnit}: Group) => {\n    const newList = records.filter(r => r.category === category)\n      .sort((a, b) => dayjs(b.createdAt).valueOf() - dayjs(a.createdAt).valueOf());\n    if (newList.length === 0) {\n      return [] as Result;\n    }\n    // 按照开始结束时间，计算所有时间区段\n    const sec = calcSections(newList[newList.length - 1].createdAt, newList[0].createdAt, dateUnit);\n    setSections(sec);\n\n    const {title, uid} = getGroup(dayjs(newList[0].createdAt), dateUnit);\n\n    const result: Result = [{\n      uid,\n      title,\n      items: [newList[0]]\n    }];\n\n    for (let i = 1; i < newList.length; i++) {\n      const current = newList[i];\n      const last = result[result.length - 1];\n      const {title, uid} = getGroup(dayjs(current.createdAt), dateUnit);\n\n      if (uid === last.uid) {\n        last.items.push(current);\n      } else {\n        result.push({\n          uid,\n          title,\n          items: [current]\n        });\n      }\n    }\n\n    result.forEach(group => {\n      group.total = group.items.reduce((sum, item) => sum + item.amount, 0);\n    });\n    return result;\n  };\n\n  const getKvPairs = (records: RecordItem[], uuid: string, dateUnit: DateUnit) => {\n    let unit: DateUnit;\n    let span: number;\n    let start: dayjs.Dayjs;\n    switch (dateUnit) {\n      case 'year':\n        unit = 'month';\n        span = 12;\n        start = dayjs(uuid);\n        break;\n      case 'month':\n        unit = 'day';\n        span = dayjs(uuid).daysInMonth();\n        start = dayjs(uuid);\n        break;\n      case 'week':\n        const [year, week] = uuid.split('-');\n        start = dayjs(year).week(parseInt(week)).startOf('week');\n        unit = 'day';\n        span = 7;\n        break;\n      default:\n        unit = 'day';\n        span = 1;\n        start = dayjs(uuid);\n        break;\n    }\n    const bucket: { keys: string[], values: number[], ranks: RankList } = {\n      keys: [],\n      values: [],\n      ranks: []\n    };\n    let nexts: dayjs.Dayjs[] = [];\n    for (let i = 0; i < span; i++) {\n      nexts.unshift(start.add(i, unit));\n    }\n\n    let i = 0;\n    let tags: { [tagId: string]: number } = {};\n\n    nexts.forEach((item) => {\n      let sum = 0;\n      for (i; i < records.length; i++) {\n        if (dayjs(records[i].createdAt).valueOf() >= item.valueOf()) {\n          sum += records[i].amount;\n          const total = tags[records[i].tagId];\n          if (total === undefined) {\n            tags[records[i].tagId] = records[i].amount;\n          } else {\n            tags[records[i].tagId] = total + records[i].amount;\n          }\n        } else {\n          break;\n        }\n      }\n      bucket.keys.unshift(unitFormat(item, dateUnit));\n      bucket.values.unshift(sum);\n    });\n\n    const total = bucket.values.reduce((sum, value) => {return sum += value;}, 0);\n\n    const ranks = Object.keys(tags).reduce((rankList: RankList, tagId: string) => {\n      const value = tags[tagId];\n      const item = {tagId: parseInt(tagId), value, percent: value / total};\n      const index = rankList.findIndex((item, index) => item.value < value);\n\n      if (index === -1) {\n        rankList.push(item);\n      } else {\n        rankList.splice(index, 0, item);\n      }\n      return rankList;\n    }, []);\n\n    bucket.ranks = ranks;\n    return bucket;\n  };\n\n  return {records, sections, addRecord, getRecords, getKvPairs, removeRecord};\n};\n","import Layout from '../components/Layout';\nimport React, {useState} from 'react';\nimport {CategorySection} from './Money/CategorySection';\nimport styled from 'styled-components';\nimport {RecordItem, useRecords} from '../hooks/useRecords';\nimport {useTags} from '../hooks/useTags';\nimport day from 'dayjs';\nimport Icon from '../components/Icon';\nimport {Topbar} from './Tag/Topbar';\n\nconst MyLayout = styled(Layout)`\n  display: flex;\n  flex-direction: column;\n\n  .details {\n    // 只中间区域滚动\n    flex: 1;\n    overflow-y: auto;\n\n    .scroll-snap {\n      display: flex;\n      overflow-y: hidden;\n      scroll-snap-type: x mandatory;\n      font-size: 16px;\n      position: relative;\n\n      &::-webkit-scrollbar {\n        display: none;\n      }\n\n      > .delete {\n        white-space: nowrap;\n        border: 0;\n        padding: 0;\n        color: #fff;\n        background-color: #eb4646;\n        width: 4em;\n        height: calc(1.8em + 20px);\n        padding: 10px;\n        position: absolute;\n        left: 100%;\n        outline: 0;\n      }\n\n      > .content {\n        flex: 0 0 100vw;\n        scroll-snap-align: start;\n      }\n\n      > .space {\n        flex: 0 0 4em;\n        scroll-snap-align: end;\n      }\n    }\n  }\n`;\n\nconst CategoryWrapper = styled.div`\n  background: #ffda44;\n`;\n\nconst Item = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background: white;\n  font-size: 16px;\n  line-height: 20px;\n  padding: 10px 16px;\n  border-bottom: 1px solid #ddd;\n\n  > .note {\n    margin-right: auto;\n    margin-left: 16px;\n    color: #999;\n  }\n\n  > .tag,\n  > .amount {\n    display: flex;\n    align-items: center;\n  }\n\n  > .tag {\n    flex-shrink: 0;\n    justify-content: center;\n    width: 1.8em;\n    height: 1.8em;\n    border-radius: 50%;\n    background: #ffda44;\n  }\n`;\n\nconst Header = styled.h3`\n  font-size: 16px;\n  line-height: 20px;\n  padding: 10px 16px;\n  font-weight: normal;\n`;\n\nconst Wrapper = styled.div`\n  header {\n    justify-content: center;\n    font-size: 20px;\n    letter-spacing: 0.2em;\n    padding-bottom: 0;\n  }\n`;\n\nconst week = ['星期一', '星期二', '星期三', '星期四', '星期五', '星期六', '星期天'];\n\nfunction Details() {\n  const [category, setCategory] = useState<'expense' | 'income'>('expense');\n  const {records, removeRecord} = useRecords();\n  const {getIcon} = useTags();\n  const hash: { [K: string]: RecordItem[] } = {};\n  const selectedRecords = records.filter(r => r.category === category);\n\n  selectedRecords.forEach(r => {\n    const key = day(r.createdAt).format('MM月DD日') + ' ' + week[day(r.createdAt).day()];\n    if (!(key in hash)) {\n      hash[key] = [];\n    }\n    hash[key].unshift(r);\n  });\n\n  // Object.entries 把对象变成数组\n  const array = Object.entries(hash).sort((a, b) => {\n    if (a[0] === b[0]) return 0;\n    if (a[0] > b[0]) return -1;\n    if (a[0] < b[0]) return 1;\n    return 0;\n  });\n\n  return (\n    <MyLayout>\n      <Wrapper>\n        <Topbar>币归记账</Topbar>\n      </Wrapper>\n      <CategoryWrapper>\n        <CategorySection value={category}\n                         onChange={value => setCategory(value)}/>\n      </CategoryWrapper>\n      <div className='details'>\n        {array.map(([date, records], i) =>\n          <div key={i}>\n            <Header>{date}</Header>\n            <div>\n              {records.map((r, index) => {\n                const tag = getIcon(r.tagId);\n                return (\n                  <div className='scroll-snap' key={index}>\n                    <button className=\"delete\" onClick={() => {\n                      removeRecord(r.id);\n                    }}>删除\n                    </button>\n                    <Item className='content'>\n                      <div className=\"tag\">\n                        <Icon name={tag && tag.icon} size={24}/>\n                      </div>\n                      <div className=\"note oneLine\">\n                        {r.note === '' ? (tag && tag.name) : r.note}\n                      </div>\n                      <div className=\"amount\">{category === 'expense' ? '-' : '+'}{r.amount}</div>\n                    </Item>\n                    <s className=\"space\"></s>\n                  </div>\n                );\n              })}\n            </div>\n          </div>)}\n      </div>\n    </MyLayout>\n  );\n}\n\nexport default Details;\n","import React from 'react';\nimport styled from 'styled-components';\nimport Icon from './Icon';\n\nconst Label = styled.label`\n  display: flex;\n  align-items: center;\n\n  > span {\n    // 不换行\n    white-space: nowrap;\n  }\n\n  > input {\n    display: block;\n    width: 100%;\n    height: 44px;\n    background: none;\n    border: none;\n  }\n`;\ntype Props = {\n  label?: string;\n  icon?: string;\n} & React.InputHTMLAttributes<HTMLInputElement>;// 继承一部分 input 的属性\n\nconst Input: React.FC<Props> = (props) => {\n\n  const {label, children, ...rest} = props;\n\n  const Inner = () => {\n    let inner;\n    if (props.icon) {\n      inner = <>\n        <Icon name={props.icon} size={24}/>\n        <span>{props.label}</span>\n      </>;\n    } else {\n      inner = <span>{props.label}</span>;\n    }\n    return inner;\n  };\n\n  return (\n    <Label>\n      <Inner/>\n      {/*将 input 全部原生属性自动添加进来*/}\n      <input {...rest}/>\n    </Label>\n  );\n};\n\nexport {Input};\n","import styled from 'styled-components';\nimport React, {ChangeEventHandler} from 'react';\nimport {Input} from 'components/Input';\n\nconst Wrapper = styled.section`\n  background: #f3f3f3;\n  padding: 2px 4px;\n  font-size: 14px;\n`;\n\ntype Props = {\n  value: string,\n  onChange: (value: string) => void;\n}\n\nconst NoteSection: React.FC<Props> = (props) => {\n  const note = props.value;\n\n  // 受控组件设值\n  const onChange: ChangeEventHandler<HTMLInputElement> = (e) => {\n    props.onChange(e.target.value);\n  };\n\n  return (\n    <Wrapper>\n      <Input type=\"text\" className='oneLine' label=\"备注：\" icon='note' value={note} onChange={onChange}\n             placeholder=\"点击写备注...\"/>\n    </Wrapper>\n  );\n};\n\nexport {NoteSection};\n","import styled from 'styled-components';\n\nconst Wrapper = styled.section`\n  display: flex;\n  flex-direction: column;\n\n  > .output {\n    background: white;\n    font-size: 26px;\n    line-height: 48px;\n    text-align: right;\n    padding: 0 16px;\n    border-top: 1px solid #ccc;\n    background-color: #f3f3f3;\n    //box-shadow: inset 0 -5px 5px -5px rgba(0, 0, 0, 0.25),\n    //inset 0 5px 5px -5px rgba(0, 0, 0, 0.25);\n  }\n\n  > .pad {\n    border-bottom: 1px solid #ccc;\n\n    > button {\n      font-size: 18px;\n      float: left;\n      width: 25%;\n      height: 64px;\n      background-color: #f3f3f3;\n      border: none;\n      border-right: 1px solid #ccc;\n      border-top: 1px solid #ccc;\n\n      &.ok {\n        height: 128px;\n        float: right;\n      }\n\n      &:nth-child(4n) {\n        border-right: none;\n      }\n\n      &.highlight {\n        background-color: #ffda44;\n      }\n\n      &.date {\n        position: relative;\n\n        .today {\n          width: 100%;\n          height: 100%;\n          background-color: #f3f3f3;\n          position: absolute;\n          left: 0;\n          top: 0;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: 14px;\n\n          svg {\n            margin-right: 0.5em;\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport {Wrapper};\n","import styled from 'styled-components';\r\nimport React from 'react';\r\n\r\nconst Wrapper = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n\r\n  input[type=\"date\"] {\r\n    text-align: center;\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n    border: none;\r\n    font-size: 13px;\r\n    appearance: none;\r\n    -moz-appearance: none;\r\n    -webkit-appearance: none;\r\n    background-color: transparent;\r\n    color: transparent;\r\n    opacity: 0;\r\n\r\n    &::-webkit-calendar-picker-indicator {\r\n      position: absolute;\r\n      top: 0;\r\n      left: 0;\r\n      right: 0;\r\n      bottom: 0;\r\n      width: auto;\r\n      height: auto;\r\n      color: transparent;\r\n      background: transparent;\r\n    }\r\n\r\n    &::-webkit-inner-spin-button {\r\n      -webkit-appearance: none;\r\n      visibility: hidden;\r\n    }\r\n\r\n    &::-webkit-outer-spin-button {\r\n      -webkit-appearance: none;\r\n    }\r\n  }\r\n`;\r\n\r\ntype Props = {\r\n  onChange: (value: string) => void\r\n}\r\n\r\n\r\nconst DatePicker: React.FC<Props> = (props) => {\r\n  return (\r\n    <Wrapper>\r\n      <input type='date' className='oneLine' onChange={(e) => {\r\n        props.onChange(e.target.value);\r\n      }}/>\r\n    </Wrapper>\r\n  );\r\n};\r\nexport {DatePicker};\r\n","import React, {useState} from 'react';\nimport {Wrapper} from './NumberPadSection/Wrapper';\nimport {generateOutput} from './NumberPadSection/generateOutput';\nimport Icon from '../../components/Icon';\nimport {DatePicker} from './DatePicker';\n\ntype Props = {\n  value: number,\n  onChange: (value: number) => void,\n  onOk?: () => void;\n  onDateSet: (value: string) => void\n}\n\nconst NumberPadSection: React.FC<Props> = (props) => {\n  // const output = props.value.toString();\n  const [output, _setOutput] = useState(props.value.toString());\n  const setOutput = (output: string) => {\n    let newOutput: string;\n    if (output.length > 16) {\n      newOutput = output.slice(0, 16);\n    } else if (output.length === 0) {\n      newOutput = '0';\n    } else {\n      newOutput = output;\n    }\n    _setOutput(newOutput);\n    props.onChange(parseFloat(newOutput));\n  };\n  const onClickButtonWrapper = (e: React.MouseEvent) => {\n    const text = (e.target as SVGUseElement | HTMLButtonElement).getAttribute('value');\n    if (text === null) {return;}\n    if (text === 'ok') {\n      if (props.onOk) {\n        props.onOk();\n      }\n      return;\n    }\n    if ('0123456789.'.split('').concat(['delete', 'clear']).indexOf(text) >= 0) {\n      setOutput(generateOutput(text, output));\n    }\n  };\n\n  const [date, setDate] = useState('今天');\n\n  return (\n    <Wrapper>\n      <div className=\"output\">\n        {output}\n      </div>\n      <div className=\"pad clearfix\" onClick={onClickButtonWrapper}>\n        <button value='7'>7</button>\n        <button value='8'>8</button>\n        <button value='9'>9</button>\n        <button value='date' className='date'>\n          <div className='today oneLine'>\n            {date === '今天' ? <><Icon name='date' size={24}/>{date}</> : date}\n          </div>\n          <DatePicker onChange={(value) => {\n            props.onDateSet(value);\n            setDate(value);\n          }}/>\n        </button>\n        <button value='4'>4</button>\n        <button value='5'>5</button>\n        <button value='6'>6</button>\n        <button value='clear'>清空</button>\n        <button value='1'>1</button>\n        <button value='2'>2</button>\n        <button value='3'>3</button>\n        <button value='ok' className=\"ok highlight\">完成</button>\n        <button value='.' className=\"dot\">.</button>\n        <button value='0' className=\"zero\">0</button>\n        <button value='delete'>\n          <Icon name=\"delete\" value='delete' size={24}/>\n        </button>\n      </div>\n    </Wrapper>\n  );\n};\nexport {NumberPadSection};\n","// type InputString = '0' | '1' | '2' | '3' | '4' | '5' | '6' | '7' | '8' | '9' | '.' | '删除' | '清空';\n\nconst generateOutput = (text: string, output = '0') => {\n  switch (text) {\n    case '0':\n    case '1':\n    case '2':\n    case '3':\n    case '4':\n    case '5':\n    case '6':\n    case '7':\n    case '8':\n    case '9':\n      if (output === '0') {\n        return text;\n      } else {\n        return output + text;\n      }\n    case '.':\n      if (output.indexOf('.') >= 0) {\n        return output;\n      }\n      return output + '.';\n    case 'delete':\n      if (output.length === 1) {\n        return '';\n      } else {\n        return output.slice(0, -1) || '';\n      }\n    case 'clear':\n      return '';\n    default:\n      return '';\n  }\n};\n\nexport {generateOutput};\n","import styled from 'styled-components';\nimport React from 'react';\nimport {Category, useTags} from 'hooks/useTags';\nimport Icon from '../../components/Icon';\nimport {Link} from 'react-router-dom';\nimport {Center} from '../../components/Center';\n\nconst Wrapper = styled.section`\n  background: #FFFFFF;\n  padding: 12px 16px;\n  overflow: auto;\n\n  > ol {\n    display: grid;\n    margin: 0 -12px;\n    grid-template-columns:1fr 1fr 1fr 1fr 1fr;\n    margin-left: auto;\n    margin-right: auto;\n\n    > li {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n\n      div {\n        background: #f5f5f5;\n        border-radius: 50%;\n        font-size: 14px;\n        margin: 8px 12px;\n        width: 3em;\n        height: 3em;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n      }\n\n      &.selected div {\n        background: #ffda44;\n      }\n    }\n  }\n`;\n\ntype Props = {\n  value: number,\n  category: Category,\n  onChange: (value: number) => void;\n}\n\n// FC = FunctionComponent\nconst TagsSection: React.FC<Props> = (props) => {\n  const {tags} = useTags();\n  const selectedTagId = props.value;\n\n  const onToggleTag = (tagId: number) => {\n    props.onChange(tagId);\n  };\n\n  const getClass = (tagId: number) => selectedTagId === tagId ? 'selected' : '';\n\n  const tagGroup = tags.filter(tag => tag.category === props.category);\n\n  return (\n    <Wrapper>\n      <ol>\n        {tagGroup.map(tag =>\n          <li key={tag.id} onClick={() => onToggleTag(tag.id)}\n              className={getClass(tag.id)}>\n            <Center>\n              <Icon name={tag.icon} size={24}/>\n            </Center>\n            {tag.name}\n          </li>\n        )}\n        <li>\n          <Link to={'/tags/' + props.category}>\n            <Center>\n              <Icon name='setting' size={24}/>\n            </Center>\n          </Link>\n          设置\n        </li>\n      </ol>\n    </Wrapper>\n  );\n};\n\nexport {TagsSection};\n","import Layout from '../components/Layout';\nimport React, {useState} from 'react';\nimport styled from 'styled-components';\nimport {CategorySection} from './Money/CategorySection';\nimport {NoteSection} from './Money/NoteSection';\nimport {NumberPadSection} from './Money/NumberPadSection';\nimport {TagsSection} from './Money/TagsSection';\nimport {useRecords} from '../hooks/useRecords';\nimport {Category} from '../hooks/useTags';\nimport {useRouter} from '../hooks/useRouter';\n\nconst MyLayout = styled(Layout)`\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  animation: animate 0.25s ease;\n\n  @keyframes animate {\n    from {\n      bottom: -100vh;\n    }\n    to {\n      bottom: 0;\n    }\n  }\n\n  section {\n    flex: 1;\n  }\n`;\n\nconst defaultFormData = {\n  id: -1,\n  tagId: -2,\n  note: '',\n  category: 'expense' as Category,\n  amount: 0,\n  createdAt: ''\n};\n\nconst CategoryWrapper = styled.div`\n  background: #ffda44;\n`;\n\n// todo: 一行显示备注和数字面板输出值（需要重新设计 NoteSection 和 NumberPadSection 组件）\n// const Line = styled.div`\n//   display: flex;\n// `;\n\nfunction Money() {\n  const [selected, setSelected] = useState(defaultFormData);\n  const {redirect} = useRouter();\n\n  const {addRecord} = useRecords();\n  const onChange = (obj: Partial<typeof selected>) => {\n    setSelected({...selected, ...obj});\n  };\n\n  const submit = () => {\n    if (addRecord(selected)) {\n      setSelected(defaultFormData);\n      // setRedirect(true);\n      redirect('/details');\n    }\n  };\n\n  return (\n    <MyLayout scrollTop={9999}>\n      <CategoryWrapper>\n        <CategorySection value={selected.category}\n                         onChange={category => onChange({category})}/>\n      </CategoryWrapper>\n      <TagsSection value={selected.tagId}\n                   category={selected.category}\n                   onChange={tagId => onChange({tagId})}/>\n      <div>\n        <NoteSection value={selected.note}\n                     onChange={note => onChange({note})}/>\n        <NumberPadSection value={selected.amount}\n                          onChange={amount => onChange({amount})}\n                          onDateSet={date => onChange({createdAt: date})}\n                          onOk={submit}/>\n      </div>\n    </MyLayout>\n  );\n}\n\nexport default Money;\n","import {useHistory} from 'react-router-dom';\r\nimport {useEffect, useState} from 'react';\r\n\r\nexport const useRouter = () => {\r\n  const history = useHistory();\r\n  const [url, setUrl] = useState('/');\r\n  const [flag, setFlag] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (flag) {\r\n      history.push(url);\r\n    }\r\n  }, [url, flag, history]);\r\n\r\n  const redirect = (url: string) => {\r\n    setUrl(url);\r\n    setFlag(true);\r\n  };\r\n\r\n  return {redirect};\r\n};\r\n","import React from 'react';\n\nfunction NoMatch() {\n  return (\n    <div>页面不存在，你丫输错地址了吧！</div>\n  );\n}\n\nexport default NoMatch;","export const defaultTags = [\r\n  {id: 1, icon: 'jucan', name: '聚餐', category: 'expense'},\r\n  {id: 2, icon: 'gouwu', name: '购物', category: 'expense'},\r\n  {id: 3, icon: 'riyong', name: '日用', category: 'expense'},\r\n  {id: 4, icon: 'jiaotong', name: '交通', category: 'expense'},\r\n  {id: 5, icon: 'shucai', name: '蔬菜', category: 'expense'},\r\n  {id: 6, icon: 'shuiguo', name: '水果', category: 'expense'},\r\n  {id: 7, icon: 'lingshi', name: '零食', category: 'expense'},\r\n  {id: 8, icon: 'yundong', name: '运动', category: 'expense'},\r\n  {id: 9, icon: 'yule', name: '娱乐', category: 'expense'},\r\n  {id: 10, icon: 'tongxun', name: '通讯', category: 'expense'},\r\n  {id: 11, icon: 'yifu', name: '衣服', category: 'expense'},\r\n  {id: 12, icon: 'meirong', name: '美容', category: 'expense'},\r\n  {id: 13, icon: 'zhufang', name: '住房', category: 'expense'},\r\n  {id: 14, icon: 'jujia', name: '居家', category: 'expense'},\r\n  {id: 15, icon: 'yuer', name: '育儿', category: 'expense'},\r\n  {id: 16, icon: 'zhangbei', name: '长辈', category: 'expense'},\r\n  {id: 17, icon: 'shejiao', name: '社交', category: 'expense'},\r\n  {id: 18, icon: 'lvxing', name: '旅行', category: 'expense'},\r\n  {id: 19, icon: 'yanjiu', name: '烟酒', category: 'expense'},\r\n  {id: 20, icon: 'shuma', name: '数码', category: 'expense'},\r\n  {id: 21, icon: 'yiliao', name: '医疗', category: 'expense'},\r\n  {id: 22, icon: 'shuji', name: '书籍', category: 'expense'},\r\n  {id: 23, icon: 'xuexi', name: '学习', category: 'expense'},\r\n  {id: 24, icon: 'chongwu', name: '宠物', category: 'expense'},\r\n  {id: 25, icon: 'lijin', name: '礼金', category: 'expense'},\r\n  {id: 26, icon: 'liwu', name: '礼物', category: 'expense'},\r\n  {id: 27, icon: 'bangong', name: '办公', category: 'expense'},\r\n  {id: 28, icon: 'weixiu', name: '维修', category: 'expense'},\r\n  {id: 29, icon: 'juanzeng', name: '捐赠', category: 'expense'},\r\n  {id: 30, icon: 'qinyou', name: '亲友', category: 'expense'},\r\n  {id: 31, icon: 'kuaidi', name: '快递', category: 'expense'},\r\n  {id: 32, icon: 'youxi', name: '游戏', category: 'expense'},\r\n  {id: 33, icon: 'gongzi', name: '工资', category: 'income'},\r\n  {id: 34, icon: 'jianzhi', name: '兼职', category: 'income'},\r\n  {id: 35, icon: 'licai', name: '理财', category: 'income'},\r\n  {id: 36, icon: 'lijin', name: '红包', category: 'income'},\r\n  {id: 37, icon: 'qita', name: '其他', category: 'income'},\r\n  {id: 38, icon: 'pingpangqiu', name: '乒乓球', category: 'expense'},\r\n  {id: 39, icon: 'youyong', name: '游泳', category: 'expense'},\r\n  {id: 40, icon: 'xiangqi', name: '象棋', category: 'expense'},\r\n  {id: 41, icon: 'youleyuan', name: '游乐园', category: 'expense'},\r\n  {id: 42, icon: 'dengshan', name: '登山', category: 'expense'},\r\n  {id: 43, icon: 'puke', name: '扑克', category: 'expense'},\r\n  {id: 44, icon: 'lanqiu', name: '篮球', category: 'expense'},\r\n  {id: 45, icon: 'sheji', name: '射击', category: 'expense'},\r\n  {id: 46, icon: 'yumaoqiu', name: '羽毛球', category: 'expense'},\r\n  {id: 47, icon: 'taiqiu', name: '台球', category: 'expense'},\r\n  {id: 48, icon: 'baolingqiu', name: '保龄球', category: 'expense'},\r\n  {id: 49, icon: 'xuegao', name: '雪糕', category: 'expense'},\r\n  {id: 50, icon: 'xiangjiao', name: '香蕉', category: 'expense'},\r\n  {id: 51, icon: 'pingguo', name: '苹果', category: 'expense'},\r\n  {id: 52, icon: 'miantiao', name: '面条', category: 'expense'},\r\n  {id: 53, icon: 'kafei', name: '咖啡', category: 'expense'},\r\n  {id: 54, icon: 'tijian', name: '体检', category: 'expense'},\r\n  {id: 55, icon: 'zhusheqi', name: '注射器', category: 'expense'},\r\n  {id: 56, icon: 'gangqin', name: '钢琴', category: 'expense'},\r\n  {id: 57, icon: 'jita', name: '吉他', category: 'expense'},\r\n  {id: 58, icon: 'danche', name: '单车', category: 'expense'},\r\n  {id: 59, icon: 'deshi', name: '的士', category: 'expense'},\r\n  {id: 60, icon: 'ditie', name: '地铁', category: 'expense'},\r\n  {id: 61, icon: 'jiayouzhan', name: '加油站', category: 'expense'},\r\n  {id: 62, icon: 'lundu', name: '轮渡', category: 'expense'},\r\n  {id: 63, icon: 'gaotie', name: '高铁', category: 'expense'},\r\n  {id: 64, icon: 'diandongche', name: '电动车', category: 'expense'},\r\n  {id: 65, icon: 'gaogenxie', name: '鞋', category: 'expense'}\r\n];\r\n","import React, {useState} from 'react';\r\nimport Layout from 'components/Layout';\r\nimport Icon from 'components/Icon';\r\nimport {Input} from 'components/Input';\r\nimport {Category, TagItem, useTags} from '../hooks/useTags';\r\nimport {useHistory, useParams} from 'react-router-dom';\r\nimport styled from 'styled-components';\r\nimport {Topbar} from './Tag/Topbar';\r\nimport {Center} from '../components/Center';\r\nimport {defaultTags} from '../data/tags';\r\n\r\nconst MyLayout = styled(Layout)`\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst InputWrapper = styled.div`\r\n  flex-shrink: 0;\r\n  background: white;\r\n  padding: 0 16px;\r\n  margin: 8px 0;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n\r\n  .round {\r\n    background-color: #ffda44;\r\n    border-radius: 50%;\r\n    width: 2.2em;\r\n    height: 2.2em;\r\n    margin-right: 16px;\r\n  }\r\n\r\n  label {\r\n    flex: 1;\r\n  }\r\n`;\r\n\r\nconst Wrapper = styled.section`\r\n  flex: 1;\r\n  background: #FFFFFF;\r\n  padding: 12px 16px;\r\n  overflow: auto;\r\n\r\n  > ol {\r\n    display: grid;\r\n    margin: 0 -12px;\r\n    grid-template-columns:1fr 1fr 1fr 1fr 1fr;\r\n    margin-left: auto;\r\n    margin-right: auto;\r\n\r\n    > li {\r\n      display: flex;\r\n      flex-direction: column;\r\n      align-items: center;\r\n\r\n      div {\r\n        background: #f5f5f5;\r\n        border-radius: 50%;\r\n        font-size: 14px;\r\n        margin: 8px 12px;\r\n        width: 3em;\r\n        height: 3em;\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n      }\r\n\r\n      &.selected div {\r\n        background: #ffda44;\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\ntype Params = {\r\n  category: Category\r\n}\r\n\r\nconst categoryMap = {'expense': '支出', 'income': '收入'};\r\n\r\nconst Tag: React.FC = () => {\r\n  const [newTag, setNewTag] = useState<TagItem>({\r\n    id: 32,\r\n    icon: 'youxi',\r\n    name: '',\r\n    category: 'expense'\r\n  });\r\n  const {addTag} = useTags();\r\n  let {category} = useParams<Params>();\r\n\r\n  const tagContent = () => (\r\n    <InputWrapper>\r\n      <Center className='round'>\r\n        <Icon name={newTag.icon} size={20}/>\r\n      </Center>\r\n      <Input type=\"text\" placeholder=\"请输入类别名称（不超过4个汉字）\" value={newTag.name}\r\n             onChange={(e) => {\r\n               setNewTag({\r\n                 id: newTag.id,\r\n                 icon: newTag.icon,\r\n                 name: e.target.value,\r\n                 category\r\n               });\r\n             }}\r\n      />\r\n    </InputWrapper>\r\n  );\r\n\r\n  const history = useHistory();\r\n  // fixme: 用户直接输入 url 访问页面，则没法回退\r\n  const onClickBack = () => {\r\n    history.goBack();\r\n  };\r\n\r\n  const onToggleTag = (tag: TagItem) => {\r\n    setNewTag(tag);\r\n  };\r\n\r\n  const getClass = (name: string) => newTag.icon === name ? 'selected' : '';\r\n  const tagGroup = defaultTags.filter(tag => tag.category === category);\r\n\r\n  return (\r\n    <MyLayout>\r\n      <Topbar>\r\n        <Icon name=\"left\" size={24} onClick={onClickBack}/>\r\n        <span>添加{categoryMap[category]}类别</span>\r\n        <span onClick={() => {\r\n          addTag(newTag);\r\n          history.goBack();\r\n        }}>完成</span>\r\n      </Topbar>\r\n      {tagContent()}\r\n      <Wrapper>\r\n        <ol>\r\n          {tagGroup.map(tag =>\r\n            <li key={tag.id} onClick={() => onToggleTag(tag as TagItem)}\r\n                className={getClass(tag.name)}>\r\n              <Center>\r\n                <Icon name={tag.icon} size={24}/>\r\n              </Center>\r\n            </li>\r\n          )}\r\n        </ol>\r\n      </Wrapper>\r\n    </MyLayout>\r\n  );\r\n};\r\n\r\nexport {Tag};\r\n","import styled from 'styled-components';\nimport React, {useState} from 'react';\nimport {VerticalSelect} from '../Tag/VerticalSelect';\nimport Icon from '../../components/Icon';\nimport {Center} from '../../components/Center';\n\nconst Wrapper = styled.section`\n  flex-shrink: 0;\n  font-size: 14px;\n  background-color: #ffda44;\n  display: flex;\n  flex-direction: column;\n\n  .category {\n    text-align: center;\n    padding: 20px 0 14px 0;\n\n    > div {\n      display: inline-block;\n    }\n\n    svg {\n      margin-left: 0.5em;\n    }\n  }\n`;\n\ntype Value = {\n  category: string\n} | {\n  dateUnit: string\n} | {\n  listVisible: boolean\n}\n\ntype Props = {\n  category: string\n  dateUnit: string\n  listVisible: boolean\n  onChange: (value: Value) => void\n}\n\nconst categoryMap = {'expense': '支出', 'income': '收入'};\nconst dateCategoryMap = [\n  // {key: 'day', value: '日'},\n  {key: 'week', value: '周'},\n  {key: 'month', value: '月'},\n  {key: 'year', value: '年'}\n];\n\nconst SelectSection: React.FC<Props> = (props) => {\n  type Keys = keyof typeof categoryMap\n  const [dateCategory, setDateCategory] = useState(props.dateUnit);\n\n  return (\n    <Wrapper>\n      <div className='category'>\n        <Center onClick={() => {\n          props.onChange({listVisible: !props.listVisible});\n        }}>\n          {categoryMap[props.category as Keys]}\n          <Icon name='down' size={16}/>\n        </Center>\n      </div>\n      <VerticalSelect type='bar'\n                      value={dateCategory}\n                      map={dateCategoryMap}\n                      onChange={(value) => {\n                        setDateCategory(value);\n                        props.onChange({dateUnit: value});\n                      }}/>\n    </Wrapper>\n  );\n};\n\nexport {SelectSection};\n","import {EChartOption} from 'echarts';\r\n\r\nexport const defaultOption = (keys: any[], values: any[], name: string): EChartOption => {\r\n  const color = '#ffda44';\r\n  return {\r\n    grid: {\r\n      left: 0,\r\n      right: 0\r\n    },\r\n    xAxis: {\r\n      type: 'category',\r\n      data: keys,\r\n      axisTick: {alignWithLabel: true},\r\n      axisLine: {\r\n        lineStyle: {color: '#ddd'}\r\n      },\r\n      axisLabel: {\r\n        formatter: '{value}',\r\n        color: '#8d8d8d',\r\n      }\r\n    },\r\n    yAxis: {\r\n      type: 'value',\r\n      show: false\r\n    },\r\n    series: [{\r\n      symbol: 'circle',// 实心圆\r\n      symbolSize: 6,\r\n      itemStyle: {\r\n        borderWidth: 1,\r\n        color: (node: any) => node.value === 0 ? '#fff' : color,\r\n        borderColor: '#8d8d8d',\r\n      },\r\n      lineStyle: {width: 1, color: '#8d8d8d'},\r\n      data: values,\r\n      type: 'line',\r\n      smooth: false,\r\n      markLine: {\r\n        symbol: ['none', 'none'],\r\n        data: [{\r\n          name: '平均线',\r\n          type: 'average',\r\n        }, {\r\n          name: '最大值',\r\n          type: 'max',\r\n          lineStyle: {type: 'solid'},\r\n          label: {\r\n            show: true,\r\n            position: 'end',\r\n          }\r\n        }],\r\n        lineStyle: {width: 1, color: '#8d8d8d'},\r\n        silent: true,\r\n        animation: false\r\n      }\r\n    }]\r\n  };\r\n}\r\n\r\nexport const toPercent = (value: number) => {\r\n  let str = Number(value * 100).toFixed(1);\r\n  str += '%';\r\n  return str;\r\n};\r\n","import React, {useEffect, useState} from 'react';\r\nimport styled from 'styled-components';\r\nimport {DateUnit, Result, useRecords} from '../hooks/useRecords';\r\nimport {Category, useTags} from '../hooks/useTags';\r\nimport Icon from '../components/Icon';\r\nimport {SelectSection} from './Detail/SelectSection';\r\nimport cs from 'classnames';\r\nimport Nav from '../components/Nav';\r\nimport {VerticalSelect} from './Tag/VerticalSelect';\r\nimport {defaultOption, toPercent} from '../lib/chart';\r\nimport ReactEcharts from 'echarts-for-react';\r\n\r\nconst MyLayout = styled.div`\r\n  height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst Main = styled.div`\r\n  flex-grow: 1;\r\n  overflow-y: auto;\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n  .mask {\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n    background: rgba(0, 0, 0, 0.6);\r\n    display: none;\r\n    z-index: 1;\r\n  }\r\n\r\n  > ul.category-list {\r\n    display: flex;\r\n    flex-direction: column;\r\n    position: absolute;\r\n    width: 100%;\r\n    transition: all 0.25s linear;\r\n    top: -30%;\r\n    z-index: 2;\r\n\r\n    > li {\r\n      //text-align: center;\r\n      padding: 16px 0;\r\n      line-height: 1em;\r\n      background-color: #fff;\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      border-bottom: 1px solid #ddd;\r\n      padding: 10px 20px;\r\n\r\n      span {\r\n        flex: 1;\r\n        margin-left: 10px;\r\n      }\r\n\r\n      svg:first-child {\r\n        color: #ffc144;\r\n      }\r\n\r\n      svg:last-child {\r\n        opacity: 0;\r\n      }\r\n\r\n      &.selected > :last-child {\r\n        opacity: 1;\r\n      }\r\n    }\r\n\r\n    &.show {\r\n      top: 0;\r\n\r\n      & + .mask {\r\n        display: block;\r\n      }\r\n    }\r\n  }\r\n\r\n  .details {\r\n    flex-grow: 1;\r\n    overflow-y: auto;\r\n    padding: 5px;\r\n  }\r\n`;\r\n\r\nconst Wrapper = styled.div`\r\n  height: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-direction: column;\r\n  color: #ccc;\r\n`;\r\n\r\nconst defaultSelected = {\r\n  category: 'expense',\r\n  dateUnit: 'week',\r\n  listVisible: false\r\n};\r\n\r\nconst RankList = styled.div`\r\n  margin-top: 10px;\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst Item = styled.div`\r\n  display: flex;\r\n  //justify-content: space-between;\r\n  background: white;\r\n  font-size: 18px;\r\n  line-height: 20px;\r\n  padding: 10px 16px;\r\n  border-bottom: 1px solid #ddd;\r\n\r\n  > .tag {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    width: 1.8em;\r\n    height: 1.8em;\r\n    border-radius: 50%;\r\n    background: #ffda44;\r\n    margin-right: 16px;\r\n  }\r\n\r\n  .right {\r\n    flex: 1;\r\n    display: flex;\r\n    flex-direction: column;\r\n\r\n    > .label {\r\n      font-size: 14px;\r\n      display: flex;\r\n      align-items: center;\r\n\r\n      > .percent {\r\n        margin-right: auto;\r\n        margin-left: 16px;\r\n        color: #999;\r\n      }\r\n\r\n      > .tag,\r\n      > .percent,\r\n      > .amount {\r\n        display: flex;\r\n        align-items: center;\r\n      }\r\n    }\r\n\r\n    > .bar {\r\n      height: 5px;\r\n      min-width: 2px;\r\n      background-color: #ffda44;\r\n      margin: 5px 0;\r\n      border-radius: 2.5px;\r\n    }\r\n  }\r\n`;\r\n\r\nfunction Statistics() {\r\n  const [selected, setSelected] = useState(defaultSelected);\r\n  type Selected = Partial<typeof selected>;\r\n\r\n  const onChange = (obj: Selected) => {\r\n    setSelected({...selected, ...obj});\r\n  };\r\n\r\n  const {records, sections, getRecords, getKvPairs} = useRecords();\r\n  // 选中的日期分段值\r\n  const [value, setValue] = useState(sections[sections.length - 1]?.value || '');\r\n  const [options, setOptions] = useState(sections);\r\n  const [groupRecords, setGroupRecords] = useState<Result>([]);\r\n\r\n  const categoryMap = {'expense': '支出', 'income': '收入'};\r\n  type Keys = keyof typeof categoryMap\r\n  const [categoryList] = useState<Keys[]>(['expense', 'income']);\r\n\r\n  useEffect(() => {\r\n    const gRecords = getRecords({\r\n      category: selected.category as Category,\r\n      dateUnit: selected.dateUnit as DateUnit\r\n    });\r\n    setGroupRecords(gRecords);\r\n    // eslint-disable-next-line\r\n  }, [selected, records]);// 不可变数据\r\n\r\n  useEffect(() => {\r\n    setValue(sections[sections.length - 1]?.key);\r\n    setOptions(sections);\r\n  }, [sections]);\r\n\r\n\r\n  const selectedRecords = groupRecords.find((item) => item.uid === value);\r\n  const {getIcon} = useTags();\r\n\r\n  const Detail = () => {\r\n    let inner;\r\n    if (selectedRecords === undefined) {\r\n      inner = <Wrapper>\r\n        <Icon name='nodata' size={100}/>\r\n        暂无数据\r\n      </Wrapper>;\r\n    } else {\r\n      const bucket = getKvPairs(selectedRecords.items, value, selected.dateUnit as DateUnit);\r\n      const chartOptions = defaultOption(bucket.keys, bucket.values, '');\r\n      const total = selectedRecords.total!;\r\n      const sum = total.toFixed(2);\r\n      const avg = (total / bucket.keys.length).toFixed(2);\r\n      const type = categoryMap[selected.category as Category];\r\n      let max = 0;\r\n      if (bucket.ranks.length !== 0) {\r\n        max = bucket.ranks[0].value;\r\n      }\r\n\r\n      inner = (\r\n        <div className='details'>\r\n          <span>总{type}：{sum}</span>\r\n          <br/>\r\n          <span>平均值：{avg}</span>\r\n          <ReactEcharts option={chartOptions} style={{width: '100%', height: '250px'}}/>\r\n          <h4>{type}排行榜</h4>\r\n          <RankList>\r\n            {\r\n              bucket.ranks.map((r, index) => {\r\n                const tag = getIcon(r.tagId);\r\n\r\n                return <Item key={index}>\r\n                  <div className=\"tag\">\r\n                    <Icon name={tag && tag.icon} size={24}/>\r\n                  </div>\r\n                  <div className='right'>\r\n                    <div className='label'>\r\n                      <div className=\"tag oneLine\">{tag && tag.name}</div>\r\n                      <div className=\"percent\">{toPercent(r.percent)}</div>\r\n                      <div className=\"amount\">{r.value}</div>\r\n                    </div>\r\n                    <div className='bar' style={{width: toPercent(r.value / max)}}/>\r\n                  </div>\r\n                </Item>;\r\n              })\r\n            }\r\n          </RankList>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className='details'>{inner}</div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <MyLayout>\r\n      <SelectSection category={selected.category}\r\n                     dateUnit={selected.dateUnit}\r\n                     listVisible={selected.listVisible}\r\n                     onChange={value => onChange(value)}/>\r\n      <Main>\r\n        <ul className={cs('category-list', selected.listVisible ? 'show' : undefined)}>\r\n          {categoryList.map(c =>\r\n            <li key={c} className={selected.category === c ? 'selected' : ''}\r\n                onClick={() => onChange({category: c, listVisible: false})}>\r\n              <Icon name={c} size={24}/>\r\n              <span>{categoryMap[c]}</span>\r\n              <Icon name='check' size={24}/>\r\n            </li>\r\n          )}\r\n        </ul>\r\n        <div className='mask' onClick={() => {onChange({listVisible: false});}}/>\r\n        <VerticalSelect type='line'\r\n                        value={value}\r\n                        map={options}\r\n                        onChange={value => {setValue(value);}}/>\r\n        <Detail/>\r\n        <Nav/>\r\n      </Main>\r\n    </MyLayout>\r\n  );\r\n}\r\n\r\nexport default Statistics;\r\n","import React from 'react';\nimport {HashRouter as Router, Redirect, Route, Switch} from 'react-router-dom';\nimport Tags from 'views/Tags';\nimport Details from 'views/Details';\nimport Money from 'views/Money';\nimport NoMatch from 'views/NoMatch';\nimport styled from 'styled-components';\nimport {Tag} from './views/Tag';\nimport Statistics from './views/Statistics';\n\nconst AppWrapper = styled.div`\n  color: #333;\n  max-width: 520px;\n  margin: 0 auto;\n`;\n\nfunction App() {\n  return (\n    <AppWrapper>\n      <Router>\n        <Switch>\n          <Route exact path=\"/details\">\n            <Details/>\n          </Route>\n          <Route exact path=\"/money\">\n            <Money/>\n          </Route>\n          <Route exact path=\"/statistics\">\n            <Statistics/>\n          </Route>\n          <Route exact path=\"/tags/:category\">\n            <Tags/>\n          </Route>\n          <Route exact path=\"/tags/:category/new\">\n            <Tag/>\n          </Route>\n          <Redirect exact from=\"/\" to=\"/money\"/>\n          <Route path=\"*\">\n            <NoMatch/>\n          </Route>\n        </Switch>\n      </Router>\n    </AppWrapper>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'index.scss';\n\nReactDOM.render(\n  // fixme: 思考是否需要使用严格模式\n  <App/>,\n  document.getElementById('root')\n);"],"sourceRoot":""}