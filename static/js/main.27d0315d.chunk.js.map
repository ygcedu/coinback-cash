{"version":3,"sources":["lib/createId.tsx","hooks/useUpdate.tsx","hooks/useTags.tsx","components/Icon.tsx","components/Button.tsx","views/Tag/Topbar.tsx","components/Center.tsx","views/Tag/SelectBar.tsx","views/Tags.tsx","components/Nav.tsx","components/Layout.tsx","views/Money/CategorySection.tsx","hooks/useRecords.tsx","views/Details.tsx","components/Input.tsx","views/Money/NoteSection.tsx","views/Money/NumberPadSection/Wrapper.tsx","views/Money/NumberPadSection.tsx","views/Money/NumberPadSection/generateOutput.tsx","views/Money/TagsSection.tsx","views/Money.tsx","hooks/useRouter.tsx","views/NoMatch.tsx","views/Tag.tsx","views/Detail/SelectSection.tsx","views/Statistics.tsx","App.tsx","index.tsx"],"names":["id","parseInt","window","localStorage","getItem","createId","setItem","JSON","stringify","useUpdate","fn","dependency","count","useRef","useEffect","current","useTags","useState","tags","setTags","localTags","parse","length","icon","name","type","category","getIcon","tag","filter","t","addTag","findTag","filterTag","updateTag","map","findTagIndex","result","i","deleteTag","Svg","styled","svg","props","width","size","height","fill","color","Icon","className","children","attributes","cs","xlinkHref","defaultProps","Button","button","Topbar","header","Center","div","Wrapper","section","SelectBar","Object","keys","options","selected","value","c","onClick","onChange","TagList","ol","Tags","history","useHistory","useParams","setCategory","tagGroup","goBack","style","opacity","expense","income","to","NavWrapper","nav","Nav","pathname","useLocation","activeClassName","Main","Layout","mainRef","setTimeout","scrollTop","ref","CategorySection","categoryMap","categoryList","useRecords","records","setRecords","addRecord","newRecord","amount","alert","tagId","record","createdAt","Date","toISOString","MyLayout","CategoryWrapper","Item","Header","h3","week","Details","hash","r","forEach","key","day","format","push","array","entries","sort","a","b","date","index","note","Label","label","Input","rest","Inner","NoteSection","e","target","placeholder","NumberPadSection","toString","output","_setOutput","text","getAttribute","split","concat","indexOf","newOutput","slice","parseFloat","setOutput","generateOutput","onOk","TagsSection","selectedTagId","defaultFormData","Money","setSelected","redirect","url","setUrl","flag","setFlag","useRouter","obj","NoMatch","InputWrapper","Tag","newTag","setNewTag","dateCategoryMap","SelectSection","dateCategory","setDateCategory","listVisible","defaultSelected","Statistics","undefined","AppWrapper","App","exact","path","from","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.27d0315d.chunk.js","sourcesContent":["let id = parseInt(window.localStorage.getItem('idMax') || '0');\r\n\r\nconst createId = (): number => {\r\n  id += 1;\r\n  window.localStorage.setItem('idMax', JSON.stringify(id));\r\n  return id;\r\n};\r\n\r\nexport {createId};","import {useEffect, useRef} from 'react';\r\n\r\nexport const useUpdate = (fn: () => void, dependency: any) => {\r\n  const count = useRef(0);\r\n\r\n  useEffect(() => {\r\n    count.current += 1;\r\n  });\r\n\r\n  // 每次数据变化都会触发\r\n  useEffect(() => {\r\n    if (count.current > 1) {\r\n      fn();\r\n    }\r\n  }, [fn, dependency]);// 不可变数据\r\n};\r\n","import {useEffect, useState} from 'react';\nimport {createId} from 'lib/createId';\nimport {useUpdate} from './useUpdate';\n\nexport type Category = ('expense' | 'income');\n\nexport type TagItem = {\n  id: number;\n  icon: string;\n  name: string;\n  category: Category\n}\n\nconst useTags = () => {\n  const [tags, setTags] = useState<TagItem[]>([]);\n\n  useEffect(() => {\n    let localTags = JSON.parse(window.localStorage.getItem('tags') || '[]');\n    if (localTags.length === 0) {\n      localTags = [\n        {id: createId(), icon: 'canyin', name: '餐饮', type: '', category: 'expense'},\n        {id: createId(), icon: 'gouwu', name: '购物', type: '', category: 'expense'},\n        {id: createId(), icon: 'riyong', name: '日用', type: '', category: 'expense'},\n        {id: createId(), icon: 'jiaotong', name: '交通', type: '', category: 'expense'},\n        {id: createId(), icon: 'shucai', name: '蔬菜', type: '', category: 'expense'},\n        {id: createId(), icon: 'shuiguo', name: '水果', type: '', category: 'expense'},\n        {id: createId(), icon: 'lingshi', name: '零食', type: '', category: 'expense'},\n        {id: createId(), icon: 'yundong', name: '运动', type: '', category: 'expense'},\n        {id: createId(), icon: 'yule', name: '娱乐', type: '', category: 'expense'},\n        {id: createId(), icon: 'tongxun', name: '通讯', type: '', category: 'expense'},\n        {id: createId(), icon: 'fushi', name: '服饰', type: '', category: 'expense'},\n        {id: createId(), icon: 'meirong', name: '美容', type: '', category: 'expense'},\n        {id: createId(), icon: 'zhufang', name: '住房', type: '', category: 'expense'},\n        {id: createId(), icon: 'jujia', name: '居家', type: '', category: 'expense'},\n        {id: createId(), icon: 'haizi', name: '孩子', type: '', category: 'expense'},\n        {id: createId(), icon: 'zhangbei', name: '长辈', type: '', category: 'expense'},\n        {id: createId(), icon: 'shejiao', name: '社交', type: '', category: 'expense'},\n        {id: createId(), icon: 'lvxing', name: '旅行', type: '', category: 'expense'},\n        {id: createId(), icon: 'yanjiu', name: '研究', type: '', category: 'expense'},\n        {id: createId(), icon: 'shuma', name: '数码', type: '', category: 'expense'},\n        {id: createId(), icon: 'yiliao', name: '医疗', type: '', category: 'expense'},\n        {id: createId(), icon: 'shuji', name: '书籍', type: '', category: 'expense'},\n        {id: createId(), icon: 'xuexi', name: '学习', type: '', category: 'expense'},\n        {id: createId(), icon: 'chongwu', name: '宠物', type: '', category: 'expense'},\n        {id: createId(), icon: 'lijin', name: '礼金', type: '', category: 'expense'},\n        {id: createId(), icon: 'liwu', name: '礼物', type: '', category: 'expense'},\n        {id: createId(), icon: 'bangong', name: '办公', type: '', category: 'expense'},\n        {id: createId(), icon: 'weixiu', name: '维修', type: '', category: 'expense'},\n        {id: createId(), icon: 'juanzeng', name: '捐赠', type: '', category: 'expense'},\n        {id: createId(), icon: 'qinyou', name: '亲友', type: '', category: 'expense'},\n        {id: createId(), icon: 'kuaidi', name: '快递', type: '', category: 'expense'},\n        {id: createId(), icon: 'youxi', name: '游戏', type: '', category: 'expense'},\n        {id: createId(), icon: 'gongzi', name: '工资', type: '', category: 'income'},\n        {id: createId(), icon: 'jianzhi', name: '兼职', type: '', category: 'income'},\n        {id: createId(), icon: 'licai', name: '理财', type: '', category: 'income'},\n        {id: createId(), icon: 'lijin', name: '礼金', type: '', category: 'income'},\n        {id: createId(), icon: 'qita', name: '其他', type: '', category: 'income'}\n      ];\n    }\n    setTags(localTags);\n  }, []);// 组件挂载时执行\n\n  useUpdate(() => {\n    window.localStorage.setItem('tags', JSON.stringify(tags));\n  }, tags);\n\n  const findTag = (id: number) => tags.filter(tag => tag.id === id)[0];\n  const findTagIndex = (id: number) => {\n    let result = -1;\n    for (let i = 0; i < tags.length; i++) {\n      if (tags[i].id === id) {\n        result = i;\n        break;\n      }\n    }\n    return result;\n  };\n  const updateTag = (id: number, {icon, name, category}: Omit<TagItem, 'id'>) => {\n    // map() 不会改变原始数组\n    setTags(tags.map(tag => tag.id === id ? {id, icon, name, category} : tag));\n  };\n  const deleteTag = (id: number) => {\n    // filter 会返回一个新数组\n    setTags(tags.filter(tag => tag.id !== id));\n  };\n  const addTag = ({icon, name, category}: Omit<TagItem, 'id'>) => {\n    if (name !== null && name !== '') {\n      setTags([...tags, {id: createId(), icon, name, category}]);\n    }\n  };\n  const getIcon = (id: number) => {\n    const tag = tags.filter(t => t.id === id)[0];\n    return tag ? tag.icon : '';\n  };\n  const filterTag = (category: Category) => tags.filter(tag => tag.category === category);\n\n  return {tags, getIcon, addTag, setTags, findTag, filterTag, updateTag, findTagIndex, deleteTag};\n};\n\nexport {useTags};\n\n// 改 tag\n// 衣 => 衣服\n// {amount:100, tags:[1]}\n\n// tag: string => tag: {id: number; name: string}\n","import React from 'react';\nimport cs from 'classnames';\nimport styled from 'styled-components';\n\nconst Svg = styled.svg<{ size: number }>(props => ({\n  width: props.size,\n  height: props.size,\n  fill: props.color\n}));\n\ntype Props = {\n  name?: string\n  value?: string\n  color?: string\n  size?: number\n} & React.SVGAttributes<SVGElement>\n\nconst Icon = (props: Props) => {\n  // children, className 需要排除在外\n  const {name, color, size, children, className, ...attributes} = props;\n  return (\n    // <svg className={`icon ${className ? className : ''}`} {...rest}>\n    <Svg size={size!} color={color} aria-hidden=\"true\"\n         className={cs('icon', className)} {...attributes}>\n      {name && <use xlinkHref={'#icon-' + name}/>}\n    </Svg>\n  );\n};\n\nIcon.defaultProps = {\n  size: 16,\n};\n\nexport default Icon;\n","import styled from 'styled-components';\r\n\r\nconst Button = styled.button`\r\n  font-size: 18px;\r\n  border: none;\r\n  padding: 8px 12px;\r\n  background: #767676;\r\n  border-radius: 4px;\r\n  color: white;\r\n`;\r\n\r\nexport {Button};","import styled from 'styled-components';\r\n\r\nconst Topbar = styled.header`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  line-height: 20px;\r\n  padding: 14px;\r\n  font-size: 16px;\r\n  background-color: #ffda44;\r\n`;\r\n\r\nexport {Topbar};\r\n","import styled from 'styled-components';\r\n\r\nconst Center = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nexport {Center};\r\n","import styled from 'styled-components';\r\nimport React, {useState} from 'react';\r\n\r\nconst Wrapper = styled.section`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-size: 14px;\r\n  background-color: #ffda44;\r\n\r\n  > ul {\r\n    display: flex;\r\n    border: 1px solid #333;\r\n    margin-bottom: 14px;\r\n    border-radius: 8px;\r\n    overflow: hidden;\r\n    align-items: center;\r\n\r\n    > li {\r\n      width: 110px;\r\n      text-align: center;\r\n      padding: 0.4em 0;\r\n\r\n      &.selected {\r\n        background-color: #333;\r\n        color: white;\r\n      }\r\n\r\n      &:not(:first-child) {\r\n        border-left: 1px solid #333;\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\ntype Props = {\r\n  value: string\r\n  map: { [key: string]: string }\r\n  onChange: (value: string) => void\r\n}\r\n\r\nconst SelectBar: React.FC<Props> = (props) => {\r\n  const [options] = useState<string[]>(Object.keys(props.map));\r\n  const selected = props.value;\r\n\r\n  return (\r\n    <Wrapper>\r\n      <ul>\r\n        {options.map(c =>\r\n          <li key={c} className={selected === c ? 'selected' : ''}\r\n              onClick={() => props.onChange(c)}>\r\n            {props.map[c]}\r\n          </li>\r\n        )}\r\n      </ul>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport {SelectBar};\r\n","import React, {useState} from 'react';\nimport {Category, useTags} from 'hooks/useTags';\nimport styled from 'styled-components';\nimport Icon from 'components/Icon';\nimport {Link, useHistory, useParams} from 'react-router-dom';\nimport {Button} from 'components/Button';\nimport {Topbar} from './Tag/Topbar';\nimport {Center} from '../components/Center';\nimport {SelectBar} from './Tag/SelectBar';\n\nconst TagList = styled.ol`\n  font-size: 16px;\n  background: white;\n  height: 100%;\n  overflow-y: auto;\n\n  > li {\n    border-bottom: 1px solid #d5d5d9;\n    line-height: 20px;\n    margin-left: 16px;\n    display: flex;\n    align-items: center;\n\n    svg {\n      margin: 10px 10px 10px 0;\n    }\n\n    > .divide {\n      flex: 1;\n      display: flex;\n      justify-content: space-between; // 左右分开\n      align-items: center; // 上下居中\n    }\n  }\n`;\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  position: relative;\n  animation: animate 1s ease;\n  overflow: hidden;\n\n  // fixme: 此动画在 pc 端（屏幕较宽时），效果较差！\n  @keyframes animate {\n    from {\n      left: 100vw;\n    }\n    to {\n      left: 0;\n    }\n  }\n\n  button {\n    width: 100%;\n    height: 56px;\n    font-size: 16px;\n    background: white;\n    border-radius: 0;\n    box-shadow: 0 0 3px rgb(0 0 0 / 25%);\n    color: #606266;\n  }\n\n  .placeholder {\n    width: 24px;\n  }\n`;\n\nfunction Tags() {\n  const {deleteTag, filterTag} = useTags();\n  const history = useHistory();\n  // fixme: 用户直接输入 url 访问页面，则没法回退\n  const onClickBack = () => {\n    history.goBack();\n  };\n\n  const {category: type} = useParams<{ category: Category }>();\n  const [category, setCategory] = useState<Category>(type);\n  const tagGroup = filterTag(category);\n\n  return (\n    <Wrapper>\n      <Topbar>\n        <Center onClick={onClickBack}>\n          <Icon name=\"left\" size={24}/>返回\n        </Center>\n        <span>类别设置</span>\n        <Center style={{opacity: 0}}>\n          <Icon name=\"left\" size={24}/>占位\n        </Center>\n      </Topbar>\n      <SelectBar value={category}\n                 map={{expense: '支出', income: '收入'}}\n                 onChange={(category) => {\n                   setCategory(category as Category);\n                 }}/>\n      <TagList>\n        {tagGroup.map(tag =>\n          <li key={tag.id}>\n            <Icon name=\"remove\" size={24} onClick={() => {\n              deleteTag(tag.id);\n              // window.history.back();\n            }}></Icon>\n            <div className='divide'>\n              <Center>\n                <Icon name={tag.icon} size={24}/>\n                <span className=\"oneLine\">{tag.name}</span>\n              </Center>\n            </div>\n            <Icon name=\"drag\" size={24}></Icon>\n          </li>\n        )}\n      </TagList>\n      <Link to={`/tags/${category}/new`}>\n        <Button>+ 添加类别</Button>\n      </Link>\n    </Wrapper>\n  );\n};\n\nexport default Tags;\n","import styled from 'styled-components';\nimport {NavLink, useLocation} from 'react-router-dom';\nimport React from 'react';\nimport Icon from './Icon';\n\nconst NavWrapper = styled.nav`\n  background: white;\n  box-shadow: 0 0 3px rgba(0, 0, 0, 0.25);\n  line-height: 24px;\n  color: #606266;\n\n  > ul {\n    display: flex;\n\n    > li {\n      width: 33.3333%;\n      text-align: center;\n      position: relative;\n\n      > a {\n        padding: 4px 0;\n        // a 标签加 flex 布局，从 inline元素变为 block元素\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n\n        &.selected:not(.add) {\n          color: #ffda44;\n\n          .icon {\n            fill: #ffda44;\n          }\n        }\n      }\n\n      .add {\n        // 占位用\n        &::before {\n          content: '';\n          display: block;\n          height: 24px;\n        }\n\n        .round {\n          position: absolute;\n          padding: 12px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          border-radius: 50%;\n          border: 4px solid white;\n          background-color: #ffda44;\n          box-shadow: 0px -2px 6px -2px rgba(0, 0, 0, 0.25);\n          left: 50%;\n          bottom: 28px;\n          transform: translateX(-50%);\n\n          .icon {\n            fill: #000;\n          }\n        }\n\n        &.selected {\n          color: #ffda44;\n        }\n      }\n    }\n  }\n`;\n\nconst Nav = () => {\n  const {pathname} = useLocation();\n\n  return (\n    <NavWrapper>\n      <ul>\n        <li>\n          <NavLink to=\"/details\" activeClassName=\"selected\">\n            {\n              pathname === '/details' ? <Icon name=\"details-fill\" size={24}/> :\n                <Icon name=\"details\" size={24}/>\n            }\n            明细\n          </NavLink>\n        </li>\n        <li>\n          <NavLink to=\"/money\" activeClassName=\"selected\" className='add'>\n            <div className='round'>\n              <Icon name=\"add\" size={24}/>\n            </div>\n            记账\n          </NavLink>\n        </li>\n        <li>\n          <NavLink to=\"/statistics\" activeClassName=\"selected\">\n            {\n              pathname === '/statistics' ? <Icon name=\"statistics-fill\" size={24}/> :\n                <Icon name=\"statistics\" size={24}/>\n            }\n            图表\n          </NavLink>\n        </li>\n      </ul>\n    </NavWrapper>\n  );\n};\n\nexport default Nav;\n","import Nav from './Nav';\nimport React, {useEffect, useRef} from 'react';\nimport styled from 'styled-components';\n\nconst Wrapper = styled.div`\n  height: 100vh; // 不能使用 min-height\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n`;\n\nconst Main = styled.div`\n  flex-grow: 1; // 尽量高\n  overflow: auto;\n\n  &::-webkit-scrollbar {\n    display: none;\n  }\n`;\n\ntype Props = {\n  // 必要时控制组件内部样式用，类似于 v-deep\n  className?: string\n  scrollTop?: number\n}\n\nconst Layout: React.FC<Props> = (props) => {\n  const mainRef = useRef<HTMLDivElement>(null);\n  useEffect(() => {\n    setTimeout(() => {\n      if (!mainRef.current) return;\n      mainRef.current.scrollTop = props.scrollTop!;\n    }, 0);// 尽快执行这段代码\n  }, [props.scrollTop]);\n  return (\n    <Wrapper>\n      <Main ref={mainRef} className={props.className} data-x={'rick'}>\n        {props.children}\n      </Main>\n      <Nav/>\n    </Wrapper>\n  );\n};\n\nLayout.defaultProps = {\n  scrollTop: 0\n};\n\nexport default Layout;\n","import styled from 'styled-components';\nimport React, {useState} from 'react';\nimport {Category} from '../../hooks/useTags';\n\nconst Wrapper = styled.section`\n  font-size: 18px;\n\n  > ul {\n    display: flex;\n\n    > li {\n      width: 50%;\n      //text-align: center;\n      padding: 16px 0;\n      line-height: 1em;\n\n      &.selected > span {\n        position: relative;\n\n        &::after {\n          content: '';\n          display: block;\n          height: 3px;\n          background: #333;\n          position: absolute;\n          bottom: -16px;\n          width: 2.8em;\n          left: 50%;\n          transform: translateX(-50%);\n        }\n      }\n    }\n\n    > li:first-child {\n      text-align: right;\n      padding-right: 18px;\n    }\n\n    > li:nth-child(2) {\n      text-align: left;\n      padding-left: 18px;\n    }\n  }\n`;\n\ntype Props = {\n  value: Category\n  onChange: (value: Category) => void;\n}\n\nconst CategorySection: React.FC<Props> = (props) => {\n  const categoryMap = {'expense': '支出', 'income': '收入'};\n  type Keys = keyof typeof categoryMap\n  const [categoryList] = useState<Keys[]>(['expense', 'income']);\n\n  const category = props.value;// + 表示收入，-表示支出\n  return (\n    <Wrapper>\n      <ul>\n        {categoryList.map(c =>\n          <li key={c} className={category === c ? 'selected' : ''}\n              onClick={() => props.onChange(c)}>\n            <span>{categoryMap[c]}</span>\n          </li>\n        )}\n      </ul>\n    </Wrapper>\n  );\n};\n\nexport {CategorySection};\n","import {useEffect, useState} from 'react';\nimport {useUpdate} from './useUpdate';\nimport {Category} from './useTags';\n\n// type NewRecordItem = {\n//   tagIds: number[]\n//   note: string\n//   category: '+' | '-'\n//   amount: number\n// }\n\n// type RecordItem = NewRecordItem & {\n//   createdAt: string // ISO 8601\n// }\n\nexport type RecordItem = {\n  tagId: number\n  note: string\n  category: Category\n  amount: number\n  createdAt: string // ISO 8601\n}\n\n// 忽略 RecordItem 中的 createdAt 属性\ntype NewRecordItem = Omit<RecordItem, 'createdAt'>\n\nexport const useRecords = () => {\n  const [records, setRecords] = useState<RecordItem[]>([]);\n\n  useEffect(() => {\n    setRecords(JSON.parse(window.localStorage.getItem('records') || '[]'));\n  }, []);// 组件挂载时执行\n\n  useUpdate(() => {\n    window.localStorage.setItem('records', JSON.stringify(records));\n  }, records);\n\n  const addRecord = (newRecord: NewRecordItem) => {\n    if (newRecord.amount <= 0) {\n      alert('请输入金额');\n      return false;\n    }\n    if (newRecord.tagId < 0) {\n      alert('请选择标签');\n      return false;\n    }\n    const record = {...newRecord, createdAt: (new Date()).toISOString()};\n    setRecords([...records, record]);\n    return true;\n  };\n\n  return {records, addRecord};\n};\n","import Layout from '../components/Layout';\nimport React, {useState} from 'react';\nimport {CategorySection} from './Money/CategorySection';\nimport styled from 'styled-components';\nimport {RecordItem, useRecords} from '../hooks/useRecords';\nimport {useTags} from '../hooks/useTags';\nimport day from 'dayjs';\nimport Icon from '../components/Icon';\nimport {Topbar} from './Tag/Topbar';\n\nconst MyLayout = styled(Layout)`\n  display: flex;\n  flex-direction: column;\n\n  .details {\n    // 只中间区域滚动\n    flex: 1;\n    overflow-y: auto;\n  }\n`;\n\nconst CategoryWrapper = styled.div`\n  background: white;\n`;\n\nconst Item = styled.div`\n  display: flex;\n  justify-content: space-between;\n  background: white;\n  font-size: 18px;\n  line-height: 20px;\n  padding: 10px 16px;\n  border-bottom: 1px solid #ddd;\n\n  > .note {\n    margin-right: auto;\n    margin-left: 16px;\n    color: #999;\n  }\n\n  > .tag,\n  > .note,\n  > .amount {\n    display: flex;\n    align-items: center;\n  }\n\n  > .tag {\n    justify-content: center;\n    width: 1.8em;\n    height: 1.8em;\n    border-radius: 50%;\n    background: #ffda44;\n  }\n`;\n\nconst Header = styled.h3`\n  font-size: 16px;\n  line-height: 20px;\n  padding: 10px 16px;\n  font-weight: normal;\n`;\n\nconst Wrapper = styled.div`\n  header {\n    justify-content: center;\n    font-size: 20px;\n    letter-spacing: 0.2em;\n  }\n`;\n\nconst week = ['星期一', '星期二', '星期三', '星期四', '星期五', '星期六', '星期天'];\n\nfunction Details() {\n  const [category, setCategory] = useState<'expense' | 'income'>('expense');\n  const {records} = useRecords();\n  const {getIcon} = useTags();\n  const hash: { [K: string]: RecordItem[] } = {};\n  const selectedRecords = records.filter(r => r.category === category);\n\n  selectedRecords.forEach(r => {\n    const key = day(r.createdAt).format('MM月DD日') + ' ' + week[day(r.createdAt).day()];\n    if (!(key in hash)) {\n      hash[key] = [];\n    }\n    hash[key].push(r);\n  });\n\n  // Object.entries 把对象变成数组\n  const array = Object.entries(hash).sort((a, b) => {\n    if (a[0] === b[0]) return 0;\n    if (a[0] > b[0]) return -1;\n    if (a[0] < b[0]) return 1;\n    return 0;\n  });\n\n  return (\n    <MyLayout>\n      <Wrapper>\n        <Topbar>记账本</Topbar>\n      </Wrapper>\n      <CategoryWrapper>\n        <CategorySection value={category}\n                         onChange={value => setCategory(value)}/>\n      </CategoryWrapper>\n      <div className='details'>\n        {array.map(([date, records], i) =>\n          <div key={i}>\n            <Header>{date}</Header>\n            <div>\n              {records.map((r, index) => {\n                return <Item key={index}>\n                  <div className=\"tag\">\n                    <Icon name={getIcon(r.tagId)} size={24}/>\n                  </div>\n                  {r.note && <div className=\"note\">\n                    {r.note}\n                  </div>}\n                  <div className=\"amount\">￥{r.amount}</div>\n                </Item>;\n              })}\n            </div>\n          </div>)}\n      </div>\n    </MyLayout>\n  );\n}\n\nexport default Details;\n","import React from 'react';\nimport styled from 'styled-components';\nimport Icon from './Icon';\n\nconst Label = styled.label`\n  display: flex;\n  align-items: center;\n\n  > span {\n    // 不换行\n    white-space: nowrap;\n  }\n\n  > input {\n    display: block;\n    width: 100%;\n    height: 44px;\n    background: none;\n    border: none;\n  }\n`;\ntype Props = {\n  label?: string;\n  icon?: string;\n} & React.InputHTMLAttributes<HTMLInputElement>;// 继承一部分 input 的属性\n\nconst Input: React.FC<Props> = (props) => {\n\n  const {label, children, ...rest} = props;\n\n  const Inner = () => {\n    let inner;\n    if (props.icon) {\n      inner = <>\n        <Icon name={props.icon} size={24}/>\n        <span>{props.label}</span>\n      </>;\n    } else {\n      inner = <span>{props.label}</span>;\n    }\n    return inner;\n  };\n\n  return (\n    <Label>\n      <Inner/>\n      {/*将 input 全部原生属性自动添加进来*/}\n      <input {...rest}/>\n    </Label>\n  );\n};\n\nexport {Input};\n","import styled from 'styled-components';\nimport React, {ChangeEventHandler} from 'react';\nimport {Input} from 'components/Input';\n\nconst Wrapper = styled.section`\n  background: #f3f3f3;\n  padding: 2px 4px;\n  font-size: 14px;\n`;\n\ntype Props = {\n  value: string,\n  onChange: (value: string) => void;\n}\n\nconst NoteSection: React.FC<Props> = (props) => {\n  const note = props.value;\n\n  // 受控组件设值\n  const onChange: ChangeEventHandler<HTMLInputElement> = (e) => {\n    props.onChange(e.target.value);\n  };\n\n  return (\n    <Wrapper>\n      <Input type=\"text\" className='oneLine' label=\"备注：\" icon='note' value={note} onChange={onChange}\n             placeholder=\"点击写备注...\"/>\n    </Wrapper>\n  );\n};\n\nexport {NoteSection};\n","import styled from 'styled-components';\n\nconst Wrapper = styled.section`\n  display: flex;\n  flex-direction: column;\n\n  > .output {\n    background: white;\n    font-size: 26px;\n    line-height: 48px;\n    text-align: right;\n    padding: 0 16px;\n    border-top: 1px solid #ccc;\n    background-color: #f3f3f3;\n    //box-shadow: inset 0 -5px 5px -5px rgba(0, 0, 0, 0.25),\n    //inset 0 5px 5px -5px rgba(0, 0, 0, 0.25);\n  }\n\n  > .pad {\n    border-bottom: 1px solid #ccc;\n\n    > button {\n      font-size: 18px;\n      float: left;\n      width: 25%;\n      height: 64px;\n      background-color: #f3f3f3;\n      border: none;\n      border-right: 1px solid #ccc;\n      border-top: 1px solid #ccc;\n\n      &.ok {\n        height: 128px;\n        float: right;\n      }\n\n      &.zero {\n        width: 50%;\n      }\n\n      &:nth-child(4n) {\n        border-right: none;\n      }\n\n      &.highlight {\n        background-color: #ffda44;\n      }\n    }\n  }\n`;\n\nexport {Wrapper};\n","import React, {useState} from 'react';\nimport {Wrapper} from './NumberPadSection/Wrapper';\nimport {generateOutput} from './NumberPadSection/generateOutput';\nimport Icon from '../../components/Icon';\n\ntype Props = {\n  value: number,\n  onChange: (value: number) => void,\n  onOk?: () => void;\n}\n\nconst NumberPadSection: React.FC<Props> = (props) => {\n  // const output = props.value.toString();\n  const [output, _setOutput] = useState(props.value.toString());\n  const setOutput = (output: string) => {\n    let newOutput: string;\n    if (output.length > 16) {\n      newOutput = output.slice(0, 16);\n    } else if (output.length === 0) {\n      newOutput = '0';\n    } else {\n      newOutput = output;\n    }\n    _setOutput(newOutput);\n    props.onChange(parseFloat(newOutput));\n  };\n  const onClickButtonWrapper = (e: React.MouseEvent) => {\n    const text = (e.target as SVGUseElement | HTMLButtonElement).getAttribute('value');\n    if (text === null) {return;}\n    if (text === 'ok') {\n      if (props.onOk) {\n        props.onOk();\n      }\n      return;\n    }\n    if ('0123456789.'.split('').concat(['delete', 'clear']).indexOf(text) >= 0) {\n      setOutput(generateOutput(text, output));\n    }\n  };\n\n  return (\n    <Wrapper>\n      <div className=\"output\">\n        {output}\n      </div>\n      <div className=\"pad clearfix\" onClick={onClickButtonWrapper}>\n        <button value='1'>1</button>\n        <button value='2'>2</button>\n        <button value='3'>3</button>\n        <button value='delete'>\n          <Icon name=\"delete\" value='delete' size={24}/>\n        </button>\n        <button value='4'>4</button>\n        <button value='5'>5</button>\n        <button value='6'>6</button>\n        <button value='clear'>清空</button>\n        <button value='7'>7</button>\n        <button value='8'>8</button>\n        <button value='9'>9</button>\n        <button value='ok' className=\"ok highlight\">完成</button>\n        <button value='0' className=\"zero\">0</button>\n        <button value='.' className=\"dot\">.</button>\n      </div>\n    </Wrapper>\n  );\n};\nexport {NumberPadSection};\n","// type InputString = '0' | '1' | '2' | '3' | '4' | '5' | '6' | '7' | '8' | '9' | '.' | '删除' | '清空';\n\nconst generateOutput = (text: string, output = '0') => {\n  switch (text) {\n    case '0':\n    case '1':\n    case '2':\n    case '3':\n    case '4':\n    case '5':\n    case '6':\n    case '7':\n    case '8':\n    case '9':\n      if (output === '0') {\n        return text;\n      } else {\n        return output + text;\n      }\n    case '.':\n      if (output.indexOf('.') >= 0) {\n        return output;\n      }\n      return output + '.';\n    case 'delete':\n      if (output.length === 1) {\n        return '';\n      } else {\n        return output.slice(0, -1) || '';\n      }\n    case 'clear':\n      return '';\n    default:\n      return '';\n  }\n};\n\nexport {generateOutput};\n","import styled from 'styled-components';\nimport React from 'react';\nimport {Category, useTags} from 'hooks/useTags';\nimport Icon from '../../components/Icon';\nimport {Link} from 'react-router-dom';\n\nconst Wrapper = styled.section`\n  background: #FFFFFF;\n  padding: 12px 16px;\n  overflow: auto;\n\n  > ol {\n    display: grid;\n    margin: 0 -12px;\n    grid-template-columns:1fr 1fr 1fr 1fr 1fr;\n    margin-left: auto;\n    margin-right: auto;\n\n    > li {\n      background: #f5f5f5;\n      border-radius: 50%;\n      font-size: 14px;\n      margin: 8px 12px;\n      width: 3em;\n      height: 3em;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n\n      &.selected {\n        background: #ffda44;\n      }\n    }\n  }\n`;\n\ntype Props = {\n  value: number,\n  category: Category,\n  onChange: (value: number) => void;\n}\n\n// FC = FunctionComponent\nconst TagsSection: React.FC<Props> = (props) => {\n  const {tags} = useTags();\n  const selectedTagId = props.value;\n\n  const onToggleTag = (tagId: number) => {\n    props.onChange(tagId);\n  };\n\n  const getClass = (tagId: number) => selectedTagId === tagId ? 'selected' : '';\n\n  const tagGroup = tags.filter(tag => tag.category === props.category);\n\n  return (\n    <Wrapper>\n      <ol>\n        {tagGroup.map(tag =>\n          <li key={tag.id} onClick={() => onToggleTag(tag.id)}\n              className={getClass(tag.id)}>\n            <Icon name={tag.icon} size={24}/>\n          </li>\n        )}\n        <li>\n          <Link to={'/tags/' + props.category}>\n            <Icon name='setting' size={24}/>\n          </Link>\n        </li>\n      </ol>\n    </Wrapper>\n  );\n};\n\nexport {TagsSection};\n","import Layout from '../components/Layout';\nimport React, {useState} from 'react';\nimport styled from 'styled-components';\nimport {CategorySection} from './Money/CategorySection';\nimport {NoteSection} from './Money/NoteSection';\nimport {NumberPadSection} from './Money/NumberPadSection';\nimport {TagsSection} from './Money/TagsSection';\nimport {useRecords} from '../hooks/useRecords';\nimport {Category} from '../hooks/useTags';\nimport {useRouter} from '../hooks/useRouter';\n\nconst MyLayout = styled(Layout)`\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  animation: animate 0.25s ease;\n\n  @keyframes animate {\n    from {\n      bottom: -100vh;\n    }\n    to {\n      bottom: 0;\n    }\n  }\n\n  section {\n    flex: 1;\n  }\n`;\n\nconst defaultFormData = {\n  tagId: -2,\n  note: '',\n  category: 'expense' as Category,\n  amount: 0\n};\n\nconst CategoryWrapper = styled.div`\n  background: #ffda44;\n`;\n\n// todo: 一行显示备注和数字面板输出值（需要重新设计 NoteSection 和 NumberPadSection 组件）\n// const Line = styled.div`\n//   display: flex;\n// `;\n\nfunction Money() {\n  const [selected, setSelected] = useState(defaultFormData);\n  const {redirect} = useRouter();\n\n  const {addRecord} = useRecords();\n  const onChange = (obj: Partial<typeof selected>) => {\n    setSelected({...selected, ...obj});\n  };\n\n  const submit = () => {\n    if (addRecord(selected)) {\n      setSelected(defaultFormData);\n      // setRedirect(true);\n      redirect('/details');\n    }\n  };\n\n  return (\n    <MyLayout scrollTop={9999}>\n      <CategoryWrapper>\n        <CategorySection value={selected.category}\n                         onChange={category => onChange({category})}/>\n      </CategoryWrapper>\n      <TagsSection value={selected.tagId}\n                   category={selected.category}\n                   onChange={tagId => onChange({tagId})}/>\n      <div>\n        <NoteSection value={selected.note}\n                     onChange={note => onChange({note})}/>\n        <NumberPadSection value={selected.amount}\n                          onChange={amount => onChange({amount})}\n                          onOk={submit}/>\n      </div>\n    </MyLayout>\n  );\n}\n\nexport default Money;\n","import {useHistory} from 'react-router-dom';\r\nimport {useEffect, useState} from 'react';\r\n\r\nexport const useRouter = () => {\r\n  const history = useHistory();\r\n  const [url, setUrl] = useState('/');\r\n  const [flag, setFlag] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (flag) {\r\n      history.push(url);\r\n    }\r\n  }, [url, flag, history]);\r\n\r\n  const redirect = (url: string) => {\r\n    setUrl(url);\r\n    setFlag(true);\r\n  };\r\n\r\n  return {redirect};\r\n};\r\n","import React from 'react';\n\nfunction NoMatch() {\n  return (\n    <div>页面不存在，你丫输错地址了吧！</div>\n  );\n}\n\nexport default NoMatch;","import React, {useState} from 'react';\r\nimport Layout from 'components/Layout';\r\nimport Icon from 'components/Icon';\r\nimport {Input} from 'components/Input';\r\nimport {Category, TagItem, useTags} from '../hooks/useTags';\r\nimport {useHistory, useParams} from 'react-router-dom';\r\nimport styled from 'styled-components';\r\nimport {Topbar} from './Tag/Topbar';\r\nimport {Center} from '../components/Center';\r\n\r\nconst InputWrapper = styled.div`\r\n  background: white;\r\n  padding: 0 16px;\r\n  margin-top: 8px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n\r\n  .round {\r\n    background-color: #ffda44;\r\n    border-radius: 50%;\r\n    width: 2.2em;\r\n    height: 2.2em;\r\n    margin-right: 16px;\r\n  }\r\n\r\n  label {\r\n    flex: 1;\r\n  }\r\n`;\r\n\r\ntype Params = {\r\n  category: Category\r\n}\r\n\r\nconst categoryMap = {'expense': '支出', 'income': '收入'};\r\n\r\nconst Tag: React.FC = () => {\r\n  const [newTag, setNewTag] = useState<Omit<TagItem, 'id'>>({\r\n    icon: 'canyin',\r\n    name: '',\r\n    category: 'expense'\r\n  });\r\n  const {addTag} = useTags();\r\n  let {category} = useParams<Params>();\r\n\r\n  const tagContent = () => (\r\n    <div>\r\n      <InputWrapper>\r\n        <Center className='round'>\r\n          <Icon name={newTag.icon} size={20}/>\r\n        </Center>\r\n        <Input type=\"text\" placeholder=\"请输入类别名称（不超过4个汉字）\" value={newTag.name}\r\n               onChange={(e) => {\r\n                 setNewTag({\r\n                   icon: newTag.icon,\r\n                   name: e.target.value,\r\n                   category\r\n                 });\r\n               }}\r\n        />\r\n      </InputWrapper>\r\n    </div>\r\n  );\r\n\r\n  const history = useHistory();\r\n  // fixme: 用户直接输入 url 访问页面，则没法回退\r\n  const onClickBack = () => {\r\n    history.goBack();\r\n  };\r\n\r\n  return (\r\n    <Layout>\r\n      <Topbar>\r\n        <Icon name=\"left\" size={24} onClick={onClickBack}/>\r\n        <span>添加{categoryMap[category]}类别</span>\r\n        <span onClick={() => {\r\n          addTag(newTag);\r\n          history.goBack();\r\n        }}>完成</span>\r\n      </Topbar>\r\n      {tagContent()}\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport {Tag};\r\n","import styled from 'styled-components';\nimport React, {useState} from 'react';\nimport {SelectBar} from '../Tag/SelectBar';\nimport Icon from '../../components/Icon';\nimport {Center} from '../../components/Center';\n\nconst Wrapper = styled.section`\n  font-size: 14px;\n  background-color: #ffda44;\n  display: flex;\n  flex-direction: column;\n\n  .category {\n    text-align: center;\n    padding: 20px 0 14px 0;\n\n    > div {\n      display: inline-block;\n    }\n\n    svg {\n      margin-left: 0.5em;\n    }\n  }\n`;\n\ntype Value = {\n  category: string\n} | {\n  date: string\n} | {\n  listVisible: boolean\n}\n\ntype Props = {\n  category: string\n  date: string\n  listVisible: boolean\n  onChange: (value: Value) => void\n}\n\nconst categoryMap = {'expense': '支出', 'income': '收入'};\nconst dateCategoryMap = {'week': '周', 'month': '月', 'year': '年'};\n\nconst SelectSection: React.FC<Props> = (props) => {\n  type Keys = keyof typeof categoryMap\n  const [dateCategory, setDateCategory] = useState(props.date);\n\n  return (\n    <Wrapper>\n      <div className='category'>\n        <Center onClick={() => {\n          props.onChange({listVisible: !props.listVisible});\n        }}>\n          {categoryMap[props.category as Keys]}\n          <Icon name='down' size={16}/>\n        </Center>\n      </div>\n      <SelectBar value={dateCategory}\n                 map={dateCategoryMap}\n                 onChange={(value) => {\n                   setDateCategory(value);\n                   props.onChange({date: value});\n                 }}/>\n    </Wrapper>\n  );\n};\n\nexport {SelectSection};\n","import React, {useState} from 'react';\r\nimport styled from 'styled-components';\r\nimport {RecordItem, useRecords} from '../hooks/useRecords';\r\nimport {useTags} from '../hooks/useTags';\r\nimport day from 'dayjs';\r\nimport Icon from '../components/Icon';\r\nimport {SelectSection} from './Detail/SelectSection';\r\nimport cs from 'classnames';\r\nimport Nav from '../components/Nav';\r\n\r\nconst MyLayout = styled.div`\r\n  height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst Item = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  background: white;\r\n  font-size: 18px;\r\n  line-height: 20px;\r\n  padding: 10px 16px;\r\n  border-bottom: 1px solid #ddd;\r\n\r\n  > .note {\r\n    margin-right: auto;\r\n    margin-left: 16px;\r\n    color: #999;\r\n  }\r\n\r\n  > .tag,\r\n  > .note,\r\n  > .amount {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n\r\n  > .tag {\r\n    justify-content: center;\r\n    width: 1.8em;\r\n    height: 1.8em;\r\n    border-radius: 50%;\r\n    background: #ffda44;\r\n  }\r\n`;\r\n\r\nconst Header = styled.h3`\r\n  font-size: 16px;\r\n  line-height: 20px;\r\n  padding: 10px 16px;\r\n  font-weight: normal;\r\n`;\r\n\r\nconst Main = styled.div`\r\n  flex-grow: 1;\r\n  overflow-y: auto;\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n  .mask {\r\n    position: absolute;\r\n    // fixme: pc 端显示，100% 对 fixed 不起作用\r\n    width: 100%;\r\n    height: 100%;\r\n    background: rgba(0, 0, 0, 0.6);\r\n    display: none;\r\n    z-index: 1;\r\n  }\r\n\r\n  // fixme: 记录条数多时，会遮住底部导航栏中间的圆形记账图标\r\n  > ul.category-list {\r\n    display: flex;\r\n    flex-direction: column;\r\n    position: absolute;\r\n    width: 100%;\r\n    transition: all 0.25s linear;\r\n    top: -17%;\r\n    z-index: 2;\r\n\r\n    > li {\r\n      //text-align: center;\r\n      padding: 16px 0;\r\n      line-height: 1em;\r\n      background-color: #fff;\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      border-bottom: 1px solid #ddd;\r\n      padding: 10px 20px;\r\n\r\n      span {\r\n        flex: 1;\r\n        margin-left: 10px;\r\n      }\r\n\r\n      svg:first-child {\r\n        color: #ffc144;\r\n      }\r\n\r\n      svg:last-child {\r\n        opacity: 0;\r\n      }\r\n\r\n      &.selected > :last-child {\r\n        opacity: 1;\r\n      }\r\n    }\r\n\r\n    // fixme: 移动过程不要遮盖上面的节点（目前不会遮盖）\r\n    &.show {\r\n      top: 0;\r\n\r\n      // fixme: 手机端滑动时，遮罩层不会跟着滑动\r\n      & + .mask {\r\n        display: block;\r\n      }\r\n    }\r\n  }\r\n\r\n  .details {\r\n    flex: 1;\r\n    overflow-y: auto;\r\n  }\r\n`;\r\n\r\nconst week = ['星期一', '星期二', '星期三', '星期四', '星期五', '星期六', '星期天'];\r\n\r\nconst defaultSelected = {\r\n  category: 'expense',\r\n  date: 'week',\r\n  listVisible: false\r\n};\r\n\r\nfunction Statistics() {\r\n  const [selected, setSelected] = useState(defaultSelected);\r\n\r\n  const onChange = (obj: Partial<typeof selected>) => {\r\n    setSelected({...selected, ...obj});\r\n  };\r\n\r\n  const {records} = useRecords();\r\n  const {getIcon} = useTags();\r\n  const hash: { [K: string]: RecordItem[] } = {};\r\n  const selectedRecords = records.filter(r => r.category === selected.category);\r\n\r\n  selectedRecords.forEach(r => {\r\n    const key = day(r.createdAt).format('MM月DD日') + ' ' + week[day(r.createdAt).day()];\r\n    if (!(key in hash)) {\r\n      hash[key] = [];\r\n    }\r\n    hash[key].push(r);\r\n  });\r\n\r\n  // Object.entries 把对象变成数组\r\n  const array = Object.entries(hash).sort((a, b) => {\r\n    if (a[0] === b[0]) return 0;\r\n    if (a[0] > b[0]) return -1;\r\n    if (a[0] < b[0]) return 1;\r\n    return 0;\r\n  });\r\n\r\n  const categoryMap = {'expense': '支出', 'income': '收入'};\r\n  type Keys = keyof typeof categoryMap\r\n  const [categoryList] = useState<Keys[]>(['expense', 'income']);\r\n\r\n  return (\r\n    <MyLayout>\r\n      <SelectSection category={selected.category}\r\n                     date={selected.date}\r\n                     listVisible={selected.listVisible}\r\n                     onChange={value => onChange(value)}/>\r\n      <Main>\r\n        <ul className={cs('category-list', selected.listVisible ? 'show' : undefined)}>\r\n          {categoryList.map(c =>\r\n            <li key={c} className={selected.category === c ? 'selected' : ''}\r\n                onClick={() => onChange({category: c, listVisible: false})}>\r\n              <Icon name={c} size={24}/>\r\n              <span>{categoryMap[c]}</span>\r\n              <Icon name='check' size={24}/>\r\n            </li>\r\n          )}\r\n        </ul>\r\n        <div className='mask' onClick={() => {onChange({listVisible: false});}}/>\r\n        <div className='details'>\r\n          {array.map(([date, records], i) =>\r\n            <div key={i}>\r\n              <Header>{date}</Header>\r\n              <div>\r\n                {records.map((r, index) => {\r\n                  return <Item key={index}>\r\n                    <div className=\"tag\">\r\n                      <Icon name={getIcon(r.tagId)} size={24}/>\r\n                    </div>\r\n                    {r.note && <div className=\"note\">\r\n                      {r.note}\r\n                    </div>}\r\n                    <div className=\"amount\">￥{r.amount}</div>\r\n                  </Item>;\r\n                })}\r\n              </div>\r\n            </div>)}\r\n        </div>\r\n        <Nav/>\r\n      </Main>\r\n    </MyLayout>\r\n  );\r\n}\r\n\r\nexport default Statistics;\r\n","import React from 'react';\nimport {HashRouter as Router, Redirect, Route, Switch} from 'react-router-dom';\nimport Tags from 'views/Tags';\nimport Details from 'views/Details';\nimport Money from 'views/Money';\nimport NoMatch from 'views/NoMatch';\nimport styled from 'styled-components';\nimport {Tag} from './views/Tag';\nimport Statistics from './views/Statistics';\n\nconst AppWrapper = styled.div`\n  color: #333;\n  max-width: 520px;\n  margin: 0 auto;\n`;\n\nfunction App() {\n  return (\n    <AppWrapper>\n      <Router>\n        <Switch>\n          <Route exact path=\"/details\">\n            <Details/>\n          </Route>\n          <Route exact path=\"/money\">\n            <Money/>\n          </Route>\n          <Route exact path=\"/statistics\">\n            <Statistics/>\n          </Route>\n          <Route exact path=\"/tags/:category\">\n            <Tags/>\n          </Route>\n          <Route exact path=\"/tags/:category/new\">\n            <Tag/>\n          </Route>\n          <Redirect exact from=\"/\" to=\"/money\"/>\n          <Route path=\"*\">\n            <NoMatch/>\n          </Route>\n        </Switch>\n      </Router>\n    </AppWrapper>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'index.scss';\n\nReactDOM.render(\n  // fixme: 思考是否需要使用严格模式\n  <App/>,\n  document.getElementById('root')\n);"],"sourceRoot":""}